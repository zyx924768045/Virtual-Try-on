define('underscore/underscore', [
    'require',
    'exports',
    'module'
], function (require, exports, module) {
    (function () {
        var root = this;
        var previousUnderscore = root._;
        var breaker = {};
        var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;
        var push = ArrayProto.push, slice = ArrayProto.slice, concat = ArrayProto.concat, toString = ObjProto.toString, hasOwnProperty = ObjProto.hasOwnProperty;
        var nativeIsArray = Array.isArray, nativeKeys = Object.keys, nativeBind = FuncProto.bind;
        var _ = function (obj) {
            if (obj instanceof _)
                return obj;
            if (!(this instanceof _))
                return new _(obj);
            this._wrapped = obj;
        };
        if (typeof exports !== 'undefined') {
            if (typeof module !== 'undefined' && module.exports) {
                exports = module.exports = _;
            }
            exports._ = _;
        } else {
            root._ = _;
        }
        _.VERSION = '1.6.0';
        var createCallback = function (func, context, argCount) {
            if (context === void 0)
                return func;
            switch (argCount == null ? 3 : argCount) {
            case 1:
                return function (value) {
                    return func.call(context, value);
                };
            case 2:
                return function (value, other) {
                    return func.call(context, value, other);
                };
            case 3:
                return function (value, index, collection) {
                    return func.call(context, value, index, collection);
                };
            case 4:
                return function (accumulator, value, index, collection) {
                    return func.call(context, accumulator, value, index, collection);
                };
            }
            return function () {
                return func.apply(context, arguments);
            };
        };
        var lookupIterator = function (value, context, argCount) {
            if (value == null)
                return _.identity;
            if (_.isFunction(value))
                return createCallback(value, context, argCount);
            if (_.isObject(value))
                return _.matches(value);
            return _.property(value);
        };
        _.each = _.forEach = function (obj, iterator, context) {
            var i, length;
            if (obj == null)
                return obj;
            iterator = createCallback(iterator, context);
            if (obj.length === +obj.length) {
                for (i = 0, length = obj.length; i < length; i++) {
                    if (iterator(obj[i], i, obj) === breaker)
                        break;
                }
            } else {
                var keys = _.keys(obj);
                for (i = 0, length = keys.length; i < length; i++) {
                    if (iterator(obj[keys[i]], keys[i], obj) === breaker)
                        break;
                }
            }
            return obj;
        };
        _.map = _.collect = function (obj, iterator, context) {
            var results = [];
            if (obj == null)
                return results;
            iterator = lookupIterator(iterator, context);
            _.each(obj, function (value, index, list) {
                results.push(iterator(value, index, list));
            });
            return results;
        };
        var reduceError = 'Reduce of empty array with no initial value';
        _.reduce = _.foldl = _.inject = function (obj, iterator, memo, context) {
            var initial = arguments.length > 2;
            if (obj == null)
                obj = [];
            iterator = createCallback(iterator, context, 4);
            _.each(obj, function (value, index, list) {
                if (!initial) {
                    memo = value;
                    initial = true;
                } else {
                    memo = iterator(memo, value, index, list);
                }
            });
            if (!initial)
                throw TypeError(reduceError);
            return memo;
        };
        _.reduceRight = _.foldr = function (obj, iterator, memo, context) {
            var initial = arguments.length > 2;
            if (obj == null)
                obj = [];
            var length = obj.length;
            iterator = createCallback(iterator, context, 4);
            if (length !== +length) {
                var keys = _.keys(obj);
                length = keys.length;
            }
            _.each(obj, function (value, index, list) {
                index = keys ? keys[--length] : --length;
                if (!initial) {
                    memo = obj[index];
                    initial = true;
                } else {
                    memo = iterator(memo, obj[index], index, list);
                }
            });
            if (!initial)
                throw TypeError(reduceError);
            return memo;
        };
        _.find = _.detect = function (obj, predicate, context) {
            var result;
            predicate = lookupIterator(predicate, context);
            _.some(obj, function (value, index, list) {
                if (predicate(value, index, list)) {
                    result = value;
                    return true;
                }
            });
            return result;
        };
        _.filter = _.select = function (obj, predicate, context) {
            var results = [];
            if (obj == null)
                return results;
            predicate = lookupIterator(predicate, context);
            _.each(obj, function (value, index, list) {
                if (predicate(value, index, list))
                    results.push(value);
            });
            return results;
        };
        _.reject = function (obj, predicate, context) {
            return _.filter(obj, _.negate(lookupIterator(predicate)), context);
        };
        _.every = _.all = function (obj, predicate, context) {
            var result = true;
            if (obj == null)
                return result;
            predicate = lookupIterator(predicate, context);
            _.each(obj, function (value, index, list) {
                result = predicate(value, index, list);
                if (!result)
                    return breaker;
            });
            return !!result;
        };
        _.some = _.any = function (obj, predicate, context) {
            var result = false;
            if (obj == null)
                return result;
            predicate = lookupIterator(predicate, context);
            _.each(obj, function (value, index, list) {
                result = predicate(value, index, list);
                if (result)
                    return breaker;
            });
            return !!result;
        };
        _.contains = _.include = function (obj, target) {
            if (obj == null)
                return false;
            if (obj.length === +obj.length)
                return _.indexOf(obj, target) >= 0;
            return _.some(obj, function (value) {
                return value === target;
            });
        };
        _.invoke = function (obj, method) {
            var args = slice.call(arguments, 2);
            var isFunc = _.isFunction(method);
            return _.map(obj, function (value) {
                return (isFunc ? method : value[method]).apply(value, args);
            });
        };
        _.pluck = function (obj, key) {
            return _.map(obj, _.property(key));
        };
        _.where = function (obj, attrs) {
            return _.filter(obj, _.matches(attrs));
        };
        _.findWhere = function (obj, attrs) {
            return _.find(obj, _.matches(attrs));
        };
        _.max = function (obj, iterator, context) {
            var result = -Infinity, lastComputed = -Infinity, value, computed;
            if (!iterator && _.isArray(obj)) {
                for (var i = 0, length = obj.length; i < length; i++) {
                    value = obj[i];
                    if (value > result) {
                        result = value;
                    }
                }
            } else {
                iterator = lookupIterator(iterator, context);
                _.each(obj, function (value, index, list) {
                    computed = iterator(value, index, list);
                    if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
                        result = value;
                        lastComputed = computed;
                    }
                });
            }
            return result;
        };
        _.min = function (obj, iterator, context) {
            var result = Infinity, lastComputed = Infinity, value, computed;
            if (!iterator && _.isArray(obj)) {
                for (var i = 0, length = obj.length; i < length; i++) {
                    value = obj[i];
                    if (value < result) {
                        result = value;
                    }
                }
            } else {
                iterator = lookupIterator(iterator, context);
                _.each(obj, function (value, index, list) {
                    computed = iterator(value, index, list);
                    if (computed < lastComputed || computed === Infinity && result === Infinity) {
                        result = value;
                        lastComputed = computed;
                    }
                });
            }
            return result;
        };
        _.shuffle = function (obj) {
            var rand;
            var index = 0;
            var shuffled = [];
            _.each(obj, function (value) {
                rand = _.random(index++);
                shuffled[index - 1] = shuffled[rand];
                shuffled[rand] = value;
            });
            return shuffled;
        };
        _.sample = function (obj, n, guard) {
            if (n == null || guard) {
                if (obj.length !== +obj.length)
                    obj = _.values(obj);
                return obj[_.random(obj.length - 1)];
            }
            return _.shuffle(obj).slice(0, Math.max(0, n));
        };
        _.sortBy = function (obj, iterator, context) {
            iterator = lookupIterator(iterator, context);
            return _.pluck(_.map(obj, function (value, index, list) {
                return {
                    value: value,
                    index: index,
                    criteria: iterator(value, index, list)
                };
            }).sort(function (left, right) {
                var a = left.criteria;
                var b = right.criteria;
                if (a !== b) {
                    if (a > b || a === void 0)
                        return 1;
                    if (a < b || b === void 0)
                        return -1;
                }
                return left.index - right.index;
            }), 'value');
        };
        var group = function (behavior) {
            return function (obj, iterator, context) {
                var result = {};
                iterator = lookupIterator(iterator, context);
                _.each(obj, function (value, index) {
                    var key = iterator(value, index, obj);
                    behavior(result, value, key);
                });
                return result;
            };
        };
        _.groupBy = group(function (result, value, key) {
            if (_.has(result, key))
                result[key].push(value);
            else
                result[key] = [value];
        });
        _.indexBy = group(function (result, value, key) {
            result[key] = value;
        });
        _.countBy = group(function (result, value, key) {
            if (_.has(result, key))
                result[key]++;
            else
                result[key] = 1;
        });
        _.sortedIndex = function (array, obj, iterator, context) {
            iterator = lookupIterator(iterator, context, 1);
            var value = iterator(obj);
            var low = 0, high = array.length;
            while (low < high) {
                var mid = low + high >>> 1;
                if (iterator(array[mid]) < value)
                    low = mid + 1;
                else
                    high = mid;
            }
            return low;
        };
        _.toArray = function (obj) {
            if (!obj)
                return [];
            if (_.isArray(obj))
                return slice.call(obj);
            if (obj.length === +obj.length)
                return _.map(obj, _.identity);
            return _.values(obj);
        };
        _.size = function (obj) {
            if (obj == null)
                return 0;
            return obj.length === +obj.length ? obj.length : _.keys(obj).length;
        };
        _.partition = function (obj, predicate, context) {
            predicate = lookupIterator(predicate, context);
            var pass = [], fail = [];
            _.each(obj, function (value, key, obj) {
                (predicate(value, key, obj) ? pass : fail).push(value);
            });
            return [
                pass,
                fail
            ];
        };
        _.first = _.head = _.take = function (array, n, guard) {
            if (array == null)
                return void 0;
            if (n == null || guard)
                return array[0];
            if (n < 0)
                return [];
            return slice.call(array, 0, n);
        };
        _.initial = function (array, n, guard) {
            return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
        };
        _.last = function (array, n, guard) {
            if (array == null)
                return void 0;
            if (n == null || guard)
                return array[array.length - 1];
            return slice.call(array, Math.max(array.length - n, 0));
        };
        _.rest = _.tail = _.drop = function (array, n, guard) {
            return slice.call(array, n == null || guard ? 1 : n);
        };
        _.compact = function (array) {
            return _.filter(array, _.identity);
        };
        var flatten = function (input, shallow, strict, output) {
            if (shallow && _.every(input, _.isArray)) {
                return concat.apply(output, input);
            }
            for (var i = 0, length = input.length; i < length; i++) {
                var value = input[i];
                if (!_.isArray(value) && !_.isArguments(value)) {
                    if (!strict)
                        output.push(value);
                } else if (shallow) {
                    push.apply(output, value);
                } else {
                    flatten(value, shallow, strict, output);
                }
            }
            return output;
        };
        _.flatten = function (array, shallow) {
            return flatten(array, shallow, false, []);
        };
        _.without = function (array) {
            return _.difference(array, slice.call(arguments, 1));
        };
        _.uniq = _.unique = function (array, isSorted, iterator, context) {
            if (array == null)
                return [];
            if (_.isFunction(isSorted)) {
                context = iterator;
                iterator = isSorted;
                isSorted = false;
            }
            if (iterator)
                iterator = lookupIterator(iterator, context);
            var result = [];
            var seen = [];
            for (var i = 0, length = array.length; i < length; i++) {
                var value = array[i];
                if (iterator)
                    value = iterator(value, i, array);
                if (isSorted ? !i || seen !== value : !_.contains(seen, value)) {
                    if (isSorted)
                        seen = value;
                    else
                        seen.push(value);
                    result.push(array[i]);
                }
            }
            return result;
        };
        _.union = function () {
            return _.uniq(flatten(arguments, true, true, []));
        };
        _.intersection = function (array) {
            if (array == null)
                return [];
            var result = [];
            var argsLength = arguments.length;
            for (var i = 0, length = array.length; i < length; i++) {
                var item = array[i];
                if (_.contains(result, item))
                    continue;
                for (var j = 1; j < argsLength; j++) {
                    if (!_.contains(arguments[j], item))
                        break;
                }
                if (j === argsLength)
                    result.push(item);
            }
            return result;
        };
        _.difference = function (array) {
            var rest = flatten(slice.call(arguments, 1), true, true, []);
            return _.filter(array, function (value) {
                return !_.contains(rest, value);
            });
        };
        _.zip = function (array) {
            if (array == null)
                return [];
            var length = _.max(arguments, 'length').length;
            var results = Array(length);
            for (var i = 0; i < length; i++) {
                results[i] = _.pluck(arguments, i);
            }
            return results;
        };
        _.object = function (list, values) {
            if (list == null)
                return {};
            var result = {};
            for (var i = 0, length = list.length; i < length; i++) {
                if (values) {
                    result[list[i]] = values[i];
                } else {
                    result[list[i][0]] = list[i][1];
                }
            }
            return result;
        };
        _.indexOf = function (array, item, isSorted) {
            if (array == null)
                return -1;
            var i = 0, length = array.length;
            if (isSorted) {
                if (typeof isSorted == 'number') {
                    i = isSorted < 0 ? Math.max(0, length + isSorted) : isSorted;
                } else {
                    i = _.sortedIndex(array, item);
                    return array[i] === item ? i : -1;
                }
            }
            for (; i < length; i++)
                if (array[i] === item)
                    return i;
            return -1;
        };
        _.lastIndexOf = function (array, item, from) {
            if (array == null)
                return -1;
            var i = from == null ? array.length : from;
            while (i--)
                if (array[i] === item)
                    return i;
            return -1;
        };
        _.range = function (start, stop, step) {
            if (arguments.length <= 1) {
                stop = start || 0;
                start = 0;
            }
            step = arguments[2] || 1;
            var length = Math.max(Math.ceil((stop - start) / step), 0);
            var idx = 0;
            var range = Array(length);
            while (idx < length) {
                range[idx++] = start;
                start += step;
            }
            return range;
        };
        var Ctor = function () {
        };
        _.bind = function (func, context) {
            var args, bound;
            if (nativeBind && func.bind === nativeBind)
                return nativeBind.apply(func, slice.call(arguments, 1));
            if (!_.isFunction(func))
                throw TypeError('Bind must be called on a function');
            args = slice.call(arguments, 2);
            bound = function () {
                if (!(this instanceof bound))
                    return func.apply(context, args.concat(slice.call(arguments)));
                Ctor.prototype = func.prototype;
                var self = new Ctor();
                Ctor.prototype = null;
                var result = func.apply(self, args.concat(slice.call(arguments)));
                if (Object(result) === result)
                    return result;
                return self;
            };
            return bound;
        };
        _.partial = function (func) {
            var boundArgs = slice.call(arguments, 1);
            return function () {
                var position = 0;
                var args = boundArgs.slice();
                for (var i = 0, length = args.length; i < length; i++) {
                    if (args[i] === _)
                        args[i] = arguments[position++];
                }
                while (position < arguments.length)
                    args.push(arguments[position++]);
                return func.apply(this, args);
            };
        };
        _.bindAll = function (obj) {
            var i = 1, length = arguments.length, key;
            if (length <= 1)
                throw Error('bindAll must be passed function names');
            for (; i < length; i++) {
                key = arguments[i];
                obj[key] = createCallback(obj[key], obj, Infinity);
            }
            return obj;
        };
        _.memoize = function (func, hasher) {
            var memoize = function (key) {
                var cache = memoize.cache;
                var address = hasher ? hasher.apply(this, arguments) : key;
                if (!_.has(cache, address))
                    cache[address] = func.apply(this, arguments);
                return cache[key];
            };
            memoize.cache = {};
            return memoize;
        };
        _.delay = function (func, wait) {
            var args = slice.call(arguments, 2);
            return setTimeout(function () {
                return func.apply(null, args);
            }, wait);
        };
        _.defer = function (func) {
            return _.delay.apply(_, [
                func,
                1
            ].concat(slice.call(arguments, 1)));
        };
        _.throttle = function (func, wait, options) {
            var context, args, result;
            var timeout = null;
            var previous = 0;
            if (!options)
                options = {};
            var later = function () {
                previous = options.leading === false ? 0 : _.now();
                timeout = null;
                result = func.apply(context, args);
                if (!timeout)
                    context = args = null;
            };
            return function () {
                var now = _.now();
                if (!previous && options.leading === false)
                    previous = now;
                var remaining = wait - (now - previous);
                context = this;
                args = arguments;
                if (remaining <= 0 || remaining > wait) {
                    clearTimeout(timeout);
                    timeout = null;
                    previous = now;
                    result = func.apply(context, args);
                    if (!timeout)
                        context = args = null;
                } else if (!timeout && options.trailing !== false) {
                    timeout = setTimeout(later, remaining);
                }
                return result;
            };
        };
        _.debounce = function (func, wait, immediate) {
            var timeout, args, context, timestamp, result;
            var later = function () {
                var last = _.now() - timestamp;
                if (last < wait && last > 0) {
                    timeout = setTimeout(later, wait - last);
                } else {
                    timeout = null;
                    if (!immediate) {
                        result = func.apply(context, args);
                        if (!timeout)
                            context = args = null;
                    }
                }
            };
            return function () {
                context = this;
                args = arguments;
                timestamp = _.now();
                var callNow = immediate && !timeout;
                if (!timeout)
                    timeout = setTimeout(later, wait);
                if (callNow) {
                    result = func.apply(context, args);
                    context = args = null;
                }
                return result;
            };
        };
        _.once = function (func) {
            var ran = false, memo;
            return function () {
                if (ran)
                    return memo;
                ran = true;
                memo = func.apply(this, arguments);
                func = null;
                return memo;
            };
        };
        _.wrap = function (func, wrapper) {
            return _.partial(wrapper, func);
        };
        _.negate = function (predicate) {
            return function () {
                return !predicate.apply(this, arguments);
            };
        };
        _.compose = function () {
            var funcs = arguments;
            return function () {
                var args = arguments;
                for (var i = funcs.length - 1; i >= 0; i--) {
                    args = [funcs[i].apply(this, args)];
                }
                return args[0];
            };
        };
        _.after = function (times, func) {
            return function () {
                if (--times < 1) {
                    return func.apply(this, arguments);
                }
            };
        };
        _.keys = function (obj) {
            if (!_.isObject(obj))
                return [];
            if (nativeKeys)
                return nativeKeys(obj);
            var keys = [];
            for (var key in obj)
                if (_.has(obj, key))
                    keys.push(key);
            return keys;
        };
        _.values = function (obj) {
            var keys = _.keys(obj);
            var length = keys.length;
            var values = Array(length);
            for (var i = 0; i < length; i++) {
                values[i] = obj[keys[i]];
            }
            return values;
        };
        _.pairs = function (obj) {
            var keys = _.keys(obj);
            var length = keys.length;
            var pairs = Array(length);
            for (var i = 0; i < length; i++) {
                pairs[i] = [
                    keys[i],
                    obj[keys[i]]
                ];
            }
            return pairs;
        };
        _.invert = function (obj) {
            var result = {};
            var keys = _.keys(obj);
            for (var i = 0, length = keys.length; i < length; i++) {
                result[obj[keys[i]]] = keys[i];
            }
            return result;
        };
        _.functions = _.methods = function (obj) {
            var names = [];
            for (var key in obj) {
                if (_.isFunction(obj[key]))
                    names.push(key);
            }
            return names.sort();
        };
        _.extend = function (obj) {
            if (!_.isObject(obj))
                return obj;
            var source, prop;
            for (var i = 1, length = arguments.length; i < length; i++) {
                source = arguments[i];
                for (prop in source) {
                    obj[prop] = source[prop];
                }
            }
            return obj;
        };
        _.pick = function (obj, iterator, context) {
            var result = {}, key;
            if (_.isFunction(iterator)) {
                for (key in obj) {
                    var value = obj[key];
                    if (iterator.call(context, value, key, obj))
                        result[key] = value;
                }
            } else {
                var keys = concat.apply([], slice.call(arguments, 1));
                for (var i = 0, length = keys.length; i < length; i++) {
                    key = keys[i];
                    if (key in obj)
                        result[key] = obj[key];
                }
            }
            return result;
        };
        _.omit = function (obj, iterator, context) {
            if (_.isFunction(iterator)) {
                iterator = _.negate(iterator);
            } else {
                var keys = _.map(concat.apply([], slice.call(arguments, 1)), String);
                iterator = function (value, key) {
                    return !_.contains(keys, key);
                };
            }
            return _.pick(obj, iterator, context);
        };
        _.defaults = function (obj) {
            if (!_.isObject(obj))
                return obj;
            for (var i = 1, length = arguments.length; i < length; i++) {
                var source = arguments[i];
                for (var prop in source) {
                    if (obj[prop] === void 0)
                        obj[prop] = source[prop];
                }
            }
            return obj;
        };
        _.clone = function (obj) {
            if (!_.isObject(obj))
                return obj;
            return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
        };
        _.tap = function (obj, interceptor) {
            interceptor(obj);
            return obj;
        };
        var eq = function (a, b, aStack, bStack) {
            if (a === b)
                return a !== 0 || 1 / a === 1 / b;
            if (a == null || b == null)
                return a === b;
            if (a instanceof _)
                a = a._wrapped;
            if (b instanceof _)
                b = b._wrapped;
            var className = toString.call(a);
            if (className !== toString.call(b))
                return false;
            switch (className) {
            case '[object RegExp]':
            case '[object String]':
                return '' + a === '' + b;
            case '[object Number]':
                if (a != +a)
                    return b != +b;
                return a == 0 ? 1 / a == 1 / b : a == +b;
            case '[object Date]':
            case '[object Boolean]':
                return +a === +b;
            }
            if (typeof a != 'object' || typeof b != 'object')
                return false;
            var length = aStack.length;
            while (length--) {
                if (aStack[length] === a)
                    return bStack[length] === b;
            }
            var aCtor = a.constructor, bCtor = b.constructor;
            if (aCtor !== bCtor && 'constructor' in a && 'constructor' in b && !(_.isFunction(aCtor) && aCtor instanceof aCtor && _.isFunction(bCtor) && bCtor instanceof bCtor)) {
                return false;
            }
            aStack.push(a);
            bStack.push(b);
            var size, result;
            if (className === '[object Array]') {
                size = a.length;
                result = size === b.length;
                if (result) {
                    while (size--) {
                        if (!(result = eq(a[size], b[size], aStack, bStack)))
                            break;
                    }
                }
            } else {
                var keys = _.keys(a), key;
                size = keys.length;
                result = _.keys(b).length == size;
                if (result) {
                    while (size--) {
                        key = keys[size];
                        if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack)))
                            break;
                    }
                }
            }
            aStack.pop();
            bStack.pop();
            return result;
        };
        _.isEqual = function (a, b) {
            return eq(a, b, [], []);
        };
        _.isEmpty = function (obj) {
            if (obj == null)
                return true;
            if (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))
                return obj.length === 0;
            for (var key in obj)
                if (_.has(obj, key))
                    return false;
            return true;
        };
        _.isElement = function (obj) {
            return !!(obj && obj.nodeType === 1);
        };
        _.isArray = nativeIsArray || function (obj) {
            return toString.call(obj) === '[object Array]';
        };
        _.isObject = function (obj) {
            return obj === Object(obj);
        };
        _.each([
            'Arguments',
            'Function',
            'String',
            'Number',
            'Date',
            'RegExp'
        ], function (name) {
            _['is' + name] = function (obj) {
                return toString.call(obj) === '[object ' + name + ']';
            };
        });
        if (!_.isArguments(arguments)) {
            _.isArguments = function (obj) {
                return _.has(obj, 'callee');
            };
        }
        if (typeof /./ !== 'function') {
            _.isFunction = function (obj) {
                return typeof obj === 'function';
            };
        }
        _.isFinite = function (obj) {
            return isFinite(obj) && !isNaN(parseFloat(obj));
        };
        _.isNaN = function (obj) {
            return _.isNumber(obj) && obj !== +obj;
        };
        _.isBoolean = function (obj) {
            return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
        };
        _.isNull = function (obj) {
            return obj === null;
        };
        _.isUndefined = function (obj) {
            return obj === void 0;
        };
        _.has = function (obj, key) {
            return obj != null && hasOwnProperty.call(obj, key);
        };
        _.noConflict = function () {
            root._ = previousUnderscore;
            return this;
        };
        _.identity = function (value) {
            return value;
        };
        _.constant = function (value) {
            return function () {
                return value;
            };
        };
        _.noop = function () {
        };
        _.property = function (key) {
            return function (obj) {
                return obj[key];
            };
        };
        _.matches = function (attrs) {
            return function (obj) {
                if (obj == null)
                    return _.isEmpty(attrs);
                if (obj === attrs)
                    return true;
                for (var key in attrs)
                    if (attrs[key] !== obj[key])
                        return false;
                return true;
            };
        };
        _.times = function (n, iterator, context) {
            var accum = Array(Math.max(0, n));
            iterator = createCallback(iterator, context, 1);
            for (var i = 0; i < n; i++)
                accum[i] = iterator(i);
            return accum;
        };
        _.random = function (min, max) {
            if (max == null) {
                max = min;
                min = 0;
            }
            return min + Math.floor(Math.random() * (max - min + 1));
        };
        _.now = Date.now || function () {
            return new Date().getTime();
        };
        var entityMap = {
            escape: {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                '\'': '&#x27;'
            }
        };
        entityMap.unescape = _.invert(entityMap.escape);
        var entityRegexes = {
            escape: RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),
            unescape: RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')
        };
        _.each([
            'escape',
            'unescape'
        ], function (method) {
            _[method] = function (string) {
                if (string == null)
                    return '';
                return ('' + string).replace(entityRegexes[method], function (match) {
                    return entityMap[method][match];
                });
            };
        });
        _.result = function (object, property) {
            if (object == null)
                return void 0;
            var value = object[property];
            return _.isFunction(value) ? object[property]() : value;
        };
        var idCounter = 0;
        _.uniqueId = function (prefix) {
            var id = ++idCounter + '';
            return prefix ? prefix + id : id;
        };
        _.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var noMatch = /(.)^/;
        var escapes = {
            '\'': '\'',
            '\\': '\\',
            '\r': 'r',
            '\n': 'n',
            '\u2028': 'u2028',
            '\u2029': 'u2029'
        };
        var escaper = /\\|'|\r|\n|\u2028|\u2029/g;
        var escapeChar = function (match) {
            return '\\' + escapes[match];
        };
        _.template = function (text, data, settings) {
            settings = _.defaults({}, settings, _.templateSettings);
            var matcher = RegExp([
                (settings.escape || noMatch).source,
                (settings.interpolate || noMatch).source,
                (settings.evaluate || noMatch).source
            ].join('|') + '|$', 'g');
            var index = 0;
            var source = '__p+=\'';
            text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {
                source += text.slice(index, offset).replace(escaper, escapeChar);
                index = offset + match.length;
                if (escape) {
                    source += '\'+\n((__t=(' + escape + '))==null?\'\':_.escape(__t))+\n\'';
                } else if (interpolate) {
                    source += '\'+\n((__t=(' + interpolate + '))==null?\'\':__t)+\n\'';
                } else if (evaluate) {
                    source += '\';\n' + evaluate + '\n__p+=\'';
                }
                return match;
            });
            source += '\';\n';
            if (!settings.variable)
                source = 'with(obj||{}){\n' + source + '}\n';
            source = 'var __t,__p=\'\',__j=Array.prototype.join,' + 'print=function(){__p+=__j.call(arguments,\'\');};\n' + source + 'return __p;\n';
            try {
                var render = Function(settings.variable || 'obj', '_', source);
            } catch (e) {
                e.source = source;
                throw e;
            }
            if (data)
                return render(data, _);
            var template = function (data) {
                return render.call(this, data, _);
            };
            var argument = settings.variable || 'obj';
            template.source = 'function(' + argument + '){\n' + source + '}';
            return template;
        };
        _.chain = function (obj) {
            var instance = _(obj);
            instance._chain = true;
            return instance;
        };
        var result = function (obj) {
            return this._chain ? _(obj).chain() : obj;
        };
        _.mixin = function (obj) {
            _.each(_.functions(obj), function (name) {
                var func = _[name] = obj[name];
                _.prototype[name] = function () {
                    var args = [this._wrapped];
                    push.apply(args, arguments);
                    return result.call(this, func.apply(_, args));
                };
            });
        };
        _.mixin(_);
        _.each([
            'pop',
            'push',
            'reverse',
            'shift',
            'sort',
            'splice',
            'unshift'
        ], function (name) {
            var method = ArrayProto[name];
            _.prototype[name] = function () {
                var obj = this._wrapped;
                method.apply(obj, arguments);
                if ((name === 'shift' || name === 'splice') && obj.length === 0)
                    delete obj[0];
                return result.call(this, obj);
            };
        });
        _.each([
            'concat',
            'join',
            'slice'
        ], function (name) {
            var method = ArrayProto[name];
            _.prototype[name] = function () {
                return result.call(this, method.apply(this._wrapped, arguments));
            };
        });
        _.prototype.value = function () {
            return this._wrapped;
        };
    }.call(this));
});

define('underscore', ['underscore/underscore'], function (main) { return main; });

define('babel-runtime/helpers/extends', ['require'], function (require) {
    var exports = { __esModule: true };
    exports['default'] = function (target) {
        for (var i = 1; i < arguments.length; i++) {
            var source = arguments[i];
            for (var key in source) {
                if (Object.prototype.hasOwnProperty.call(source, key)) {
                    target[key] = source[key];
                }
            }
        }
        return target;
    };
    return exports;
});

define('babel-runtime/helpers/interop-require-default', ['require'], function (require) {
    var exports = {};
    exports['default'] = function (obj) {
        return { 'default': obj };
    };
    return exports;
});

define('util', [
    'exports',
    'babel-runtime/helpers/extends',
    'jquery',
    'babel-runtime/helpers/interop-require-default',
    'underscore'
], function (exports, _babelRuntimeHelpersExtends, _jquery, _babelRuntimeHelpersInteropRequireDefault, _underscore) {
    exports.__esModule = true;
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var getValueByPath = function getValueByPath(obj) {
        var path = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];
        var result = undefined;
        var pathArr = path.split('.');
        if (pathArr.length > 0) {
            var curKey = pathArr[0];
            var restPath = pathArr.slice(1);
            var curValue = obj[curKey];
            if (curValue) {
                if (restPath && restPath.length > 0) {
                    result = getValueByPath(curValue, restPath.join('.'));
                } else {
                    result = curValue;
                }
            }
            return result;
        }
        return result;
    };
    exports.getValueByPath = getValueByPath;
    var getDataFromRemote = function getDataFromRemote(key, options, callback) {
        var path = arguments.length <= 3 || arguments[3] === undefined ? '' : arguments[3];
        var params = _u['default'].extend({
            type: 'GET',
            dataType: 'jsonp'
        }, options);
        _$['default'].ajax(_babelRuntimeHelpersExtends['default']({}, params, {
            success: function success(response) {
                var data = path && path.length > 0 && getValueByPath(response, path);
                if (data) {
                    var nowTimes = new Date().valueOf();
                    var localObjNew = {};
                    localObjNew.lcData = data;
                    localObjNew.lcTime = nowTimes;
                    localStorage.setItem(key, JSON.stringify(localObjNew));
                    callback(data);
                }
            }
        }));
    };
    var getLocalOrRemote = function getLocalOrRemote(key, time, options, callback) {
        var path = arguments.length <= 4 || arguments[4] === undefined ? '' : arguments[4];
        var localVal = localStorage.getItem(key);
        if (localVal) {
            var localObj = JSON.parse(localVal);
            var localTimes = localObj.lcTime;
            var nowTimes = new Date().valueOf();
            if ((nowTimes - localTimes) / 1000 < time) {
                var localData = localObj.lcData;
                callback(localData);
            } else {
                getDataFromRemote(key, options, callback, path);
            }
        } else {
            getDataFromRemote(key, options, callback, path);
        }
    };
    exports.getLocalOrRemote = getLocalOrRemote;
    var wordLimit = function wordLimit(container) {
        var content = container.find('.txt');
        var str = content.text();
        if (content.height() > container.height()) {
            for (var i = 0; i <= str.length; i++) {
                content.text(str.slice(0, i));
                if (content.height() > container.height()) {
                    content.text(str.slice(0, i - 2) + '...');
                    break;
                }
            }
        }
    };
    exports.wordLimit = wordLimit;
});

define('notice/list', [
    'require',
    'jquery',
    '../util'
], function (require) {
    var $ = require('jquery');
    var util = require('../util');
    var exports = {};
    var noticeList = $('#notice-list');
    exports.init = function () {
        if (noticeList.length === 0) {
            return false;
        }
        var options = {
            type: 'POST',
            dataType: 'json',
            timeout: 3000,
            url: '/api/announcement'
        };
        util.getLocalOrRemote('portalAnnouncement', 24 * 60 * 60, options, callbackFunc, 'result');
    };
    function callbackFunc(data) {
        var html = '<dl><dt>公告</dt><dd><ul>';
        var result = data.length > 7 ? data.slice(0, 7) : data;
        $.each(result, function (i, item) {
            html += '<li><a href="/notice/index.html#' + noticeList.text(item.id).html() + '" target="_blank" + data-track-category="公告"' + 'data-track-name="' + noticeList.text(item.title).html() + '">[' + noticeList.text(item.createTime).html() + ']&nbsp;&nbsp;' + noticeList.text(item.title).html() + '</a></li>';
        });
        html += '</ul></dd></dl>';
        noticeList.html(html);
        showNotice(data);
        indexMobileShow(data);
    }
    function showNotice(list) {
        var $notice = $('.notice');
        if ($notice.length) {
            var html = '';
            for (var i = 0; i < list.length && i < 3; i++) {
                var item = list[i];
                html += '<li><a href="/notice/index.html#' + item.id + '" target="_blank"><i class="iconfont icon-announcement"></i>[' + item.createTime + '] ' + item.title.replace(/<.+>/g, '') + '</a></li>';
            }
            html += '<li class="more"><a href="/notice/index.html" target="_blank">更多公告 ></a><li>';
            $notice.find('ul').html(html);
            $notice.show();
        }
    }
    function indexMobileShow(list) {
        var notice = $('.index-mobile-notice');
        if (notice.length) {
            var html = '';
            for (var i = 0; i < list.length && i < 5; i++) {
                var item = list[i];
                html += '<li><a href="/notice/index.html#' + item.id + '" target="_blank"><strong>' + item.title.replace(/<.+>/g, '') + '</strong><span>' + item.createTime.replace(/-/g, '.') + '</span>' + '</a></li>';
            }
            notice.find('ul').html(html);
        }
    }
    return exports;
});

define('common/contactUs', [
    'exports',
    'jquery',
    'babel-runtime/helpers/interop-require-default'
], function (exports, _jquery, _babelRuntimeHelpersInteropRequireDefault) {
    exports.__esModule = true;
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var eventBind = function eventBind() {
        _$['default']('.contact-us').on('click', function () {
            if (_$['default']('#contact-us-box')[0]) {
                _$['default']('#contact-us-box').remove();
                _$['default'](this).removeClass('current-box');
                return;
            }
            if (_$['default']('.fixed-box')) {
                _$['default']('.fixed-box').remove();
            }
            _$['default'](this).addClass('current-box').siblings().removeClass('current-box');
            var contact = _$['default']('<div id="contact-us-box" class="contact-us-box fixed-box"><div class="arrow"></div><div class="close-ui"><i class="iconfont icon-close"></i></div><h3>联系我们</h3><p><i class="iconfont icon-customer-tel"></i>客服电话\uFF1A4008-777-818</p><p><i class="iconfont icon-pre-sale-tel"></i>售前电话\uFF1A4008-777-818转1</p><p><i class="iconfont icon-record-help"></i>备案帮助\uFF1A4008-777-818转3</p></div>');
            _$['default']('body').append(contact);
            var contactBox = _$['default']('#contact-us-box');
            var me = _$['default'](this);
            contactBox.find('.close-ui').on('click', function () {
                contactBox.remove();
                me.removeClass('current-box');
            });
            var toTop = _$['default'](this).offset().top - _$['default'](document).scrollTop();
            var toBottom = _$['default'](window).height() - toTop - me.height();
            contactBox.css({
                'top': 'auto',
                'bottom': toBottom + 'px'
            });
        });
    };
    var init = function init() {
        eventBind();
    };
    exports.init = init;
});

define('crypto/base', ['exports'], function (exports) {
    exports.__esModule = true;
    var byteArrayToHex = function byteArrayToHex(array) {
        var hex = [];
        for (var i = 0; i < array.length; i++) {
            var hexByte = array[i].toString(16);
            if (hexByte.length <= 1) {
                hexByte = '0' + hexByte;
            }
            hex.push(hexByte);
        }
        return hex.join('');
    };
    exports.byteArrayToHex = byteArrayToHex;
});

define('crypto/md5', [
    'exports',
    'module',
    './base',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _base, _babelRuntimeHelpersInteropRequireDefault) {
    module.exports = Md5;
    var _base2 = _babelRuntimeHelpersInteropRequireDefault['default'](_base);
    function Md5() {
        this.blockSize = 512 / 8;
        this.chain_ = new Array(4);
        this.block_ = new Array(this.blockSize);
        this.blockLength_ = 0;
        this.totalLength_ = 0;
        this.reset();
    }
    Md5.prototype.reset = function () {
        this.chain_[0] = 1732584193;
        this.chain_[1] = 4023233417;
        this.chain_[2] = 2562383102;
        this.chain_[3] = 271733878;
        this.blockLength_ = 0;
        this.totalLength_ = 0;
    };
    Md5.prototype.compress_ = function (buf, opt_offset) {
        if (!opt_offset) {
            opt_offset = 0;
        }
        var X = new Array(16);
        if (typeof buf === 'string') {
            for (var i = 0; i < 16; ++i) {
                X[i] = buf.charCodeAt(opt_offset++) | buf.charCodeAt(opt_offset++) << 8 | buf.charCodeAt(opt_offset++) << 16 | buf.charCodeAt(opt_offset++) << 24;
            }
        } else {
            for (i = 0; i < 16; ++i) {
                X[i] = buf[opt_offset++] | buf[opt_offset++] << 8 | buf[opt_offset++] << 16 | buf[opt_offset++] << 24;
            }
        }
        var A = this.chain_[0];
        var B = this.chain_[1];
        var C = this.chain_[2];
        var D = this.chain_[3];
        var sum = 0;
        sum = A + (D ^ B & (C ^ D)) + X[0] + 3614090360 & 4294967295;
        A = B + (sum << 7 & 4294967295 | sum >>> 25);
        sum = D + (C ^ A & (B ^ C)) + X[1] + 3905402710 & 4294967295;
        D = A + (sum << 12 & 4294967295 | sum >>> 20);
        sum = C + (B ^ D & (A ^ B)) + X[2] + 606105819 & 4294967295;
        C = D + (sum << 17 & 4294967295 | sum >>> 15);
        sum = B + (A ^ C & (D ^ A)) + X[3] + 3250441966 & 4294967295;
        B = C + (sum << 22 & 4294967295 | sum >>> 10);
        sum = A + (D ^ B & (C ^ D)) + X[4] + 4118548399 & 4294967295;
        A = B + (sum << 7 & 4294967295 | sum >>> 25);
        sum = D + (C ^ A & (B ^ C)) + X[5] + 1200080426 & 4294967295;
        D = A + (sum << 12 & 4294967295 | sum >>> 20);
        sum = C + (B ^ D & (A ^ B)) + X[6] + 2821735955 & 4294967295;
        C = D + (sum << 17 & 4294967295 | sum >>> 15);
        sum = B + (A ^ C & (D ^ A)) + X[7] + 4249261313 & 4294967295;
        B = C + (sum << 22 & 4294967295 | sum >>> 10);
        sum = A + (D ^ B & (C ^ D)) + X[8] + 1770035416 & 4294967295;
        A = B + (sum << 7 & 4294967295 | sum >>> 25);
        sum = D + (C ^ A & (B ^ C)) + X[9] + 2336552879 & 4294967295;
        D = A + (sum << 12 & 4294967295 | sum >>> 20);
        sum = C + (B ^ D & (A ^ B)) + X[10] + 4294925233 & 4294967295;
        C = D + (sum << 17 & 4294967295 | sum >>> 15);
        sum = B + (A ^ C & (D ^ A)) + X[11] + 2304563134 & 4294967295;
        B = C + (sum << 22 & 4294967295 | sum >>> 10);
        sum = A + (D ^ B & (C ^ D)) + X[12] + 1804603682 & 4294967295;
        A = B + (sum << 7 & 4294967295 | sum >>> 25);
        sum = D + (C ^ A & (B ^ C)) + X[13] + 4254626195 & 4294967295;
        D = A + (sum << 12 & 4294967295 | sum >>> 20);
        sum = C + (B ^ D & (A ^ B)) + X[14] + 2792965006 & 4294967295;
        C = D + (sum << 17 & 4294967295 | sum >>> 15);
        sum = B + (A ^ C & (D ^ A)) + X[15] + 1236535329 & 4294967295;
        B = C + (sum << 22 & 4294967295 | sum >>> 10);
        sum = A + (C ^ D & (B ^ C)) + X[1] + 4129170786 & 4294967295;
        A = B + (sum << 5 & 4294967295 | sum >>> 27);
        sum = D + (B ^ C & (A ^ B)) + X[6] + 3225465664 & 4294967295;
        D = A + (sum << 9 & 4294967295 | sum >>> 23);
        sum = C + (A ^ B & (D ^ A)) + X[11] + 643717713 & 4294967295;
        C = D + (sum << 14 & 4294967295 | sum >>> 18);
        sum = B + (D ^ A & (C ^ D)) + X[0] + 3921069994 & 4294967295;
        B = C + (sum << 20 & 4294967295 | sum >>> 12);
        sum = A + (C ^ D & (B ^ C)) + X[5] + 3593408605 & 4294967295;
        A = B + (sum << 5 & 4294967295 | sum >>> 27);
        sum = D + (B ^ C & (A ^ B)) + X[10] + 38016083 & 4294967295;
        D = A + (sum << 9 & 4294967295 | sum >>> 23);
        sum = C + (A ^ B & (D ^ A)) + X[15] + 3634488961 & 4294967295;
        C = D + (sum << 14 & 4294967295 | sum >>> 18);
        sum = B + (D ^ A & (C ^ D)) + X[4] + 3889429448 & 4294967295;
        B = C + (sum << 20 & 4294967295 | sum >>> 12);
        sum = A + (C ^ D & (B ^ C)) + X[9] + 568446438 & 4294967295;
        A = B + (sum << 5 & 4294967295 | sum >>> 27);
        sum = D + (B ^ C & (A ^ B)) + X[14] + 3275163606 & 4294967295;
        D = A + (sum << 9 & 4294967295 | sum >>> 23);
        sum = C + (A ^ B & (D ^ A)) + X[3] + 4107603335 & 4294967295;
        C = D + (sum << 14 & 4294967295 | sum >>> 18);
        sum = B + (D ^ A & (C ^ D)) + X[8] + 1163531501 & 4294967295;
        B = C + (sum << 20 & 4294967295 | sum >>> 12);
        sum = A + (C ^ D & (B ^ C)) + X[13] + 2850285829 & 4294967295;
        A = B + (sum << 5 & 4294967295 | sum >>> 27);
        sum = D + (B ^ C & (A ^ B)) + X[2] + 4243563512 & 4294967295;
        D = A + (sum << 9 & 4294967295 | sum >>> 23);
        sum = C + (A ^ B & (D ^ A)) + X[7] + 1735328473 & 4294967295;
        C = D + (sum << 14 & 4294967295 | sum >>> 18);
        sum = B + (D ^ A & (C ^ D)) + X[12] + 2368359562 & 4294967295;
        B = C + (sum << 20 & 4294967295 | sum >>> 12);
        sum = A + (B ^ C ^ D) + X[5] + 4294588738 & 4294967295;
        A = B + (sum << 4 & 4294967295 | sum >>> 28);
        sum = D + (A ^ B ^ C) + X[8] + 2272392833 & 4294967295;
        D = A + (sum << 11 & 4294967295 | sum >>> 21);
        sum = C + (D ^ A ^ B) + X[11] + 1839030562 & 4294967295;
        C = D + (sum << 16 & 4294967295 | sum >>> 16);
        sum = B + (C ^ D ^ A) + X[14] + 4259657740 & 4294967295;
        B = C + (sum << 23 & 4294967295 | sum >>> 9);
        sum = A + (B ^ C ^ D) + X[1] + 2763975236 & 4294967295;
        A = B + (sum << 4 & 4294967295 | sum >>> 28);
        sum = D + (A ^ B ^ C) + X[4] + 1272893353 & 4294967295;
        D = A + (sum << 11 & 4294967295 | sum >>> 21);
        sum = C + (D ^ A ^ B) + X[7] + 4139469664 & 4294967295;
        C = D + (sum << 16 & 4294967295 | sum >>> 16);
        sum = B + (C ^ D ^ A) + X[10] + 3200236656 & 4294967295;
        B = C + (sum << 23 & 4294967295 | sum >>> 9);
        sum = A + (B ^ C ^ D) + X[13] + 681279174 & 4294967295;
        A = B + (sum << 4 & 4294967295 | sum >>> 28);
        sum = D + (A ^ B ^ C) + X[0] + 3936430074 & 4294967295;
        D = A + (sum << 11 & 4294967295 | sum >>> 21);
        sum = C + (D ^ A ^ B) + X[3] + 3572445317 & 4294967295;
        C = D + (sum << 16 & 4294967295 | sum >>> 16);
        sum = B + (C ^ D ^ A) + X[6] + 76029189 & 4294967295;
        B = C + (sum << 23 & 4294967295 | sum >>> 9);
        sum = A + (B ^ C ^ D) + X[9] + 3654602809 & 4294967295;
        A = B + (sum << 4 & 4294967295 | sum >>> 28);
        sum = D + (A ^ B ^ C) + X[12] + 3873151461 & 4294967295;
        D = A + (sum << 11 & 4294967295 | sum >>> 21);
        sum = C + (D ^ A ^ B) + X[15] + 530742520 & 4294967295;
        C = D + (sum << 16 & 4294967295 | sum >>> 16);
        sum = B + (C ^ D ^ A) + X[2] + 3299628645 & 4294967295;
        B = C + (sum << 23 & 4294967295 | sum >>> 9);
        sum = A + (C ^ (B | ~D)) + X[0] + 4096336452 & 4294967295;
        A = B + (sum << 6 & 4294967295 | sum >>> 26);
        sum = D + (B ^ (A | ~C)) + X[7] + 1126891415 & 4294967295;
        D = A + (sum << 10 & 4294967295 | sum >>> 22);
        sum = C + (A ^ (D | ~B)) + X[14] + 2878612391 & 4294967295;
        C = D + (sum << 15 & 4294967295 | sum >>> 17);
        sum = B + (D ^ (C | ~A)) + X[5] + 4237533241 & 4294967295;
        B = C + (sum << 21 & 4294967295 | sum >>> 11);
        sum = A + (C ^ (B | ~D)) + X[12] + 1700485571 & 4294967295;
        A = B + (sum << 6 & 4294967295 | sum >>> 26);
        sum = D + (B ^ (A | ~C)) + X[3] + 2399980690 & 4294967295;
        D = A + (sum << 10 & 4294967295 | sum >>> 22);
        sum = C + (A ^ (D | ~B)) + X[10] + 4293915773 & 4294967295;
        C = D + (sum << 15 & 4294967295 | sum >>> 17);
        sum = B + (D ^ (C | ~A)) + X[1] + 2240044497 & 4294967295;
        B = C + (sum << 21 & 4294967295 | sum >>> 11);
        sum = A + (C ^ (B | ~D)) + X[8] + 1873313359 & 4294967295;
        A = B + (sum << 6 & 4294967295 | sum >>> 26);
        sum = D + (B ^ (A | ~C)) + X[15] + 4264355552 & 4294967295;
        D = A + (sum << 10 & 4294967295 | sum >>> 22);
        sum = C + (A ^ (D | ~B)) + X[6] + 2734768916 & 4294967295;
        C = D + (sum << 15 & 4294967295 | sum >>> 17);
        sum = B + (D ^ (C | ~A)) + X[13] + 1309151649 & 4294967295;
        B = C + (sum << 21 & 4294967295 | sum >>> 11);
        sum = A + (C ^ (B | ~D)) + X[4] + 4149444226 & 4294967295;
        A = B + (sum << 6 & 4294967295 | sum >>> 26);
        sum = D + (B ^ (A | ~C)) + X[11] + 3174756917 & 4294967295;
        D = A + (sum << 10 & 4294967295 | sum >>> 22);
        sum = C + (A ^ (D | ~B)) + X[2] + 718787259 & 4294967295;
        C = D + (sum << 15 & 4294967295 | sum >>> 17);
        sum = B + (D ^ (C | ~A)) + X[9] + 3951481745 & 4294967295;
        B = C + (sum << 21 & 4294967295 | sum >>> 11);
        this.chain_[0] = this.chain_[0] + A & 4294967295;
        this.chain_[1] = this.chain_[1] + B & 4294967295;
        this.chain_[2] = this.chain_[2] + C & 4294967295;
        this.chain_[3] = this.chain_[3] + D & 4294967295;
    };
    Md5.prototype.update = function (bytes, opt_length) {
        if (opt_length == null) {
            opt_length = bytes.length;
        }
        var lengthMinusBlock = opt_length - this.blockSize;
        var block = this.block_;
        var blockLength = this.blockLength_;
        var i = 0;
        while (i < opt_length) {
            if (blockLength === 0) {
                while (i <= lengthMinusBlock) {
                    this.compress_(bytes, i);
                    i += this.blockSize;
                }
            }
            if (typeof bytes === 'string') {
                while (i < opt_length) {
                    block[blockLength++] = bytes.charCodeAt(i++);
                    if (blockLength === this.blockSize) {
                        this.compress_(block);
                        blockLength = 0;
                        break;
                    }
                }
            } else {
                while (i < opt_length) {
                    block[blockLength++] = bytes[i++];
                    if (blockLength === this.blockSize) {
                        this.compress_(block);
                        blockLength = 0;
                        break;
                    }
                }
            }
        }
        this.blockLength_ = blockLength;
        this.totalLength_ += opt_length;
    };
    Md5.prototype.digest = function (hex) {
        var pad = new Array((this.blockLength_ < 56 ? this.blockSize : this.blockSize * 2) - this.blockLength_);
        pad[0] = 128;
        for (var i = 1; i < pad.length - 8; ++i) {
            pad[i] = 0;
        }
        var totalBits = this.totalLength_ * 8;
        for (i = pad.length - 8; i < pad.length; ++i) {
            pad[i] = totalBits & 255;
            totalBits /= 256;
        }
        this.update(pad);
        var digest = new Array(16);
        var n = 0;
        for (i = 0; i < 4; ++i) {
            for (var j = 0; j < 32; j += 8) {
                digest[n++] = this.chain_[i] >>> j & 255;
            }
        }
        if (hex === 'hex') {
            return _base2['default'].byteArrayToHex(digest);
        }
        return digest;
    };
});

define('crypto/main', [
    'exports',
    './md5',
    'babel-runtime/helpers/interop-require-default'
], function (exports, _md5, _babelRuntimeHelpersInteropRequireDefault) {
    exports.__esModule = true;
    var _Md5Hash = _babelRuntimeHelpersInteropRequireDefault['default'](_md5);
    var createHash = function createHash(type) {
        if (type === 'md5') {
            return new _Md5Hash['default']();
        }
        throw new Error('Unsupported hash type: ' + type);
    };
    exports.createHash = createHash;
});

define('crypto', ['crypto/main'], function (main) { return main; });

define('isMobile/isMobile', [], function () {
    var apple_phone = /iPhone/i, apple_ipod = /iPod/i, apple_tablet = /iPad/i, android_phone = /(?=.*\bAndroid\b)(?=.*\bMobile\b)/i, android_tablet = /Android/i, windows_phone = /IEMobile/i, windows_tablet = /(?=.*\bWindows\b)(?=.*\bARM\b)/i, other_blackberry = /BlackBerry/i, other_blackberry_10 = /BB10/i, other_opera = /Opera Mini/i, other_firefox = /(?=.*\bFirefox\b)(?=.*\bMobile\b)/i, seven_inch = new RegExp('(?:' + 'Nexus 7' + '|' + 'BNTV250' + '|' + 'Kindle Fire' + '|' + 'Silk' + '|' + 'GT-P1000' + ')', 'i');
    var match = function (regex, userAgent) {
        return regex.test(userAgent);
    };
    var IsMobileClass = function (userAgent) {
        var ua = userAgent || navigator.userAgent;
        this.apple = {
            phone: match(apple_phone, ua),
            ipod: match(apple_ipod, ua),
            tablet: match(apple_tablet, ua),
            device: match(apple_phone, ua) || match(apple_ipod, ua) || match(apple_tablet, ua)
        };
        this.android = {
            phone: match(android_phone, ua),
            tablet: !match(android_phone, ua) && match(android_tablet, ua),
            device: match(android_phone, ua) || match(android_tablet, ua)
        };
        this.windows = {
            phone: match(windows_phone, ua),
            tablet: match(windows_tablet, ua),
            device: match(windows_phone, ua) || match(windows_tablet, ua)
        };
        this.other = {
            blackberry: match(other_blackberry, ua),
            blackberry10: match(other_blackberry_10, ua),
            opera: match(other_opera, ua),
            firefox: match(other_firefox, ua),
            device: match(other_blackberry, ua) || match(other_blackberry_10, ua) || match(other_opera, ua) || match(other_firefox, ua)
        };
        this.seven_inch = match(seven_inch, ua);
        this.any = this.apple.device || this.android.device || this.windows.device || this.other.device || this.seven_inch;
        this.phone = this.apple.phone || this.android.phone || this.windows.phone;
        this.tablet = this.apple.tablet || this.android.tablet || this.windows.tablet;
        if (typeof window === 'undefined') {
            return this;
        }
    };
    var instantiate = function () {
        var IM = new IsMobileClass();
        IM.Class = IsMobileClass;
        return IM;
    };
    return instantiate();
});

define('isMobile', ['isMobile/isMobile'], function (main) { return main; });

define('urijs/punycode', [
    'require',
    'exports',
    'module'
], function (require, exports, module) {
    var punycode, maxInt = 2147483647, base = 36, tMin = 1, tMax = 26, skew = 38, damp = 700, initialBias = 72, initialN = 128, delimiter = '-', regexPunycode = /^xn--/, regexNonASCII = /[^ -~]/, regexSeparators = /\x2E|\u3002|\uFF0E|\uFF61/g, errors = {
            'overflow': 'Overflow: input needs wider integers to process',
            'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
            'invalid-input': 'Invalid input'
        }, baseMinusTMin = base - tMin, floor = Math.floor, stringFromCharCode = String.fromCharCode, key;
    function error(type) {
        throw RangeError(errors[type]);
    }
    function map(array, fn) {
        var length = array.length;
        while (length--) {
            array[length] = fn(array[length]);
        }
        return array;
    }
    function mapDomain(string, fn) {
        return map(string.split(regexSeparators), fn).join('.');
    }
    function ucs2decode(string) {
        var output = [], counter = 0, length = string.length, value, extra;
        while (counter < length) {
            value = string.charCodeAt(counter++);
            if (value >= 55296 && value <= 56319 && counter < length) {
                extra = string.charCodeAt(counter++);
                if ((extra & 64512) == 56320) {
                    output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
                } else {
                    output.push(value);
                    counter--;
                }
            } else {
                output.push(value);
            }
        }
        return output;
    }
    function ucs2encode(array) {
        return map(array, function (value) {
            var output = '';
            if (value > 65535) {
                value -= 65536;
                output += stringFromCharCode(value >>> 10 & 1023 | 55296);
                value = 56320 | value & 1023;
            }
            output += stringFromCharCode(value);
            return output;
        }).join('');
    }
    function basicToDigit(codePoint) {
        if (codePoint - 48 < 10) {
            return codePoint - 22;
        }
        if (codePoint - 65 < 26) {
            return codePoint - 65;
        }
        if (codePoint - 97 < 26) {
            return codePoint - 97;
        }
        return base;
    }
    function digitToBasic(digit, flag) {
        return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
    }
    function adapt(delta, numPoints, firstTime) {
        var k = 0;
        delta = firstTime ? floor(delta / damp) : delta >> 1;
        delta += floor(delta / numPoints);
        for (; delta > baseMinusTMin * tMax >> 1; k += base) {
            delta = floor(delta / baseMinusTMin);
        }
        return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
    }
    function decode(input) {
        var output = [], inputLength = input.length, out, i = 0, n = initialN, bias = initialBias, basic, j, index, oldi, w, k, digit, t, length, baseMinusT;
        basic = input.lastIndexOf(delimiter);
        if (basic < 0) {
            basic = 0;
        }
        for (j = 0; j < basic; ++j) {
            if (input.charCodeAt(j) >= 128) {
                error('not-basic');
            }
            output.push(input.charCodeAt(j));
        }
        for (index = basic > 0 ? basic + 1 : 0; index < inputLength;) {
            for (oldi = i, w = 1, k = base;; k += base) {
                if (index >= inputLength) {
                    error('invalid-input');
                }
                digit = basicToDigit(input.charCodeAt(index++));
                if (digit >= base || digit > floor((maxInt - i) / w)) {
                    error('overflow');
                }
                i += digit * w;
                t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
                if (digit < t) {
                    break;
                }
                baseMinusT = base - t;
                if (w > floor(maxInt / baseMinusT)) {
                    error('overflow');
                }
                w *= baseMinusT;
            }
            out = output.length + 1;
            bias = adapt(i - oldi, out, oldi == 0);
            if (floor(i / out) > maxInt - n) {
                error('overflow');
            }
            n += floor(i / out);
            i %= out;
            output.splice(i++, 0, n);
        }
        return ucs2encode(output);
    }
    function encode(input) {
        var n, delta, handledCPCount, basicLength, bias, j, m, q, k, t, currentValue, output = [], inputLength, handledCPCountPlusOne, baseMinusT, qMinusT;
        input = ucs2decode(input);
        inputLength = input.length;
        n = initialN;
        delta = 0;
        bias = initialBias;
        for (j = 0; j < inputLength; ++j) {
            currentValue = input[j];
            if (currentValue < 128) {
                output.push(stringFromCharCode(currentValue));
            }
        }
        handledCPCount = basicLength = output.length;
        if (basicLength) {
            output.push(delimiter);
        }
        while (handledCPCount < inputLength) {
            for (m = maxInt, j = 0; j < inputLength; ++j) {
                currentValue = input[j];
                if (currentValue >= n && currentValue < m) {
                    m = currentValue;
                }
            }
            handledCPCountPlusOne = handledCPCount + 1;
            if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
                error('overflow');
            }
            delta += (m - n) * handledCPCountPlusOne;
            n = m;
            for (j = 0; j < inputLength; ++j) {
                currentValue = input[j];
                if (currentValue < n && ++delta > maxInt) {
                    error('overflow');
                }
                if (currentValue == n) {
                    for (q = delta, k = base;; k += base) {
                        t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;
                        if (q < t) {
                            break;
                        }
                        qMinusT = q - t;
                        baseMinusT = base - t;
                        output.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));
                        q = floor(qMinusT / baseMinusT);
                    }
                    output.push(stringFromCharCode(digitToBasic(q, 0)));
                    bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
                    delta = 0;
                    ++handledCPCount;
                }
            }
            ++delta;
            ++n;
        }
        return output.join('');
    }
    function toUnicode(domain) {
        return mapDomain(domain, function (string) {
            return regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;
        });
    }
    function toASCII(domain) {
        return mapDomain(domain, function (string) {
            return regexNonASCII.test(string) ? 'xn--' + encode(string) : string;
        });
    }
    punycode = {
        'version': '1.2.3',
        'ucs2': {
            'decode': ucs2decode,
            'encode': ucs2encode
        },
        'decode': decode,
        'encode': encode,
        'toASCII': toASCII,
        'toUnicode': toUnicode
    };
    return punycode;
});

define('urijs/IPv6', [
    'require',
    'exports',
    'module'
], function (require, exports, module) {
    function best(address) {
        var _address = address.toLowerCase();
        var segments = _address.split(':');
        var length = segments.length;
        var total = 8;
        if (segments[0] === '' && segments[1] === '' && segments[2] === '') {
            segments.shift();
            segments.shift();
        } else if (segments[0] === '' && segments[1] === '') {
            segments.shift();
        } else if (segments[length - 1] === '' && segments[length - 2] === '') {
            segments.pop();
        }
        length = segments.length;
        if (segments[length - 1].indexOf('.') !== -1) {
            total = 7;
        }
        var pos;
        for (pos = 0; pos < length; pos++) {
            if (segments[pos] === '') {
                break;
            }
        }
        if (pos < total) {
            segments.splice(pos, 1, '0000');
            while (segments.length < total) {
                segments.splice(pos, 0, '0000');
            }
            length = segments.length;
        }
        var _segments;
        for (var i = 0; i < total; i++) {
            _segments = segments[i].split('');
            for (var j = 0; j < 3; j++) {
                if (_segments[0] === '0' && _segments.length > 1) {
                    _segments.splice(0, 1);
                } else {
                    break;
                }
            }
            segments[i] = _segments.join('');
        }
        var best = -1;
        var _best = 0;
        var _current = 0;
        var current = -1;
        var inzeroes = false;
        for (i = 0; i < total; i++) {
            if (inzeroes) {
                if (segments[i] === '0') {
                    _current += 1;
                } else {
                    inzeroes = false;
                    if (_current > _best) {
                        best = current;
                        _best = _current;
                    }
                }
            } else {
                if (segments[i] == '0') {
                    inzeroes = true;
                    current = i;
                    _current = 1;
                }
            }
        }
        if (_current > _best) {
            best = current;
            _best = _current;
        }
        if (_best > 1) {
            segments.splice(best, _best, '');
        }
        length = segments.length;
        var result = '';
        if (segments[0] === '') {
            beststr = ':';
        }
        for (i = 0; i < length; i++) {
            result += segments[i];
            if (i === length - 1) {
                break;
            }
            result += ':';
        }
        if (segments[length - 1] === '') {
            result += ':';
        }
        return result;
    }
    ;
    return { best: best };
});

define('urijs/SecondLevelDomains', [
    'require',
    'exports',
    'module'
], function (require, exports, module) {
    var hasOwn = Object.prototype.hasOwnProperty;
    var SLD = {
        list: {
            'ac': 'com|gov|mil|net|org',
            'ae': 'ac|co|gov|mil|name|net|org|pro|sch',
            'af': 'com|edu|gov|net|org',
            'al': 'com|edu|gov|mil|net|org',
            'ao': 'co|ed|gv|it|og|pb',
            'ar': 'com|edu|gob|gov|int|mil|net|org|tur',
            'at': 'ac|co|gv|or',
            'au': 'asn|com|csiro|edu|gov|id|net|org',
            'ba': 'co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze',
            'bb': 'biz|co|com|edu|gov|info|net|org|store|tv',
            'bh': 'biz|cc|com|edu|gov|info|net|org',
            'bn': 'com|edu|gov|net|org',
            'bo': 'com|edu|gob|gov|int|mil|net|org|tv',
            'br': 'adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg',
            'bs': 'com|edu|gov|net|org',
            'bz': 'du|et|om|ov|rg',
            'ca': 'ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk',
            'ck': 'biz|co|edu|gen|gov|info|net|org',
            'cn': 'ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj',
            'co': 'com|edu|gov|mil|net|nom|org',
            'cr': 'ac|c|co|ed|fi|go|or|sa',
            'cy': 'ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm',
            'do': 'art|com|edu|gob|gov|mil|net|org|sld|web',
            'dz': 'art|asso|com|edu|gov|net|org|pol',
            'ec': 'com|edu|fin|gov|info|med|mil|net|org|pro',
            'eg': 'com|edu|eun|gov|mil|name|net|org|sci',
            'er': 'com|edu|gov|ind|mil|net|org|rochest|w',
            'es': 'com|edu|gob|nom|org',
            'et': 'biz|com|edu|gov|info|name|net|org',
            'fj': 'ac|biz|com|info|mil|name|net|org|pro',
            'fk': 'ac|co|gov|net|nom|org',
            'fr': 'asso|com|f|gouv|nom|prd|presse|tm',
            'gg': 'co|net|org',
            'gh': 'com|edu|gov|mil|org',
            'gn': 'ac|com|gov|net|org',
            'gr': 'com|edu|gov|mil|net|org',
            'gt': 'com|edu|gob|ind|mil|net|org',
            'gu': 'com|edu|gov|net|org',
            'hk': 'com|edu|gov|idv|net|org',
            'id': 'ac|co|go|mil|net|or|sch|web',
            'il': 'ac|co|gov|idf|k12|muni|net|org',
            'in': 'ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res',
            'iq': 'com|edu|gov|i|mil|net|org',
            'ir': 'ac|co|dnssec|gov|i|id|net|org|sch',
            'it': 'edu|gov',
            'je': 'co|net|org',
            'jo': 'com|edu|gov|mil|name|net|org|sch',
            'jp': 'ac|ad|co|ed|go|gr|lg|ne|or',
            'ke': 'ac|co|go|info|me|mobi|ne|or|sc',
            'kh': 'com|edu|gov|mil|net|org|per',
            'ki': 'biz|com|de|edu|gov|info|mob|net|org|tel',
            'km': 'asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire',
            'kn': 'edu|gov|net|org',
            'kr': 'ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan',
            'kw': 'com|edu|gov|net|org',
            'ky': 'com|edu|gov|net|org',
            'kz': 'com|edu|gov|mil|net|org',
            'lb': 'com|edu|gov|net|org',
            'lk': 'assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web',
            'lr': 'com|edu|gov|net|org',
            'lv': 'asn|com|conf|edu|gov|id|mil|net|org',
            'ly': 'com|edu|gov|id|med|net|org|plc|sch',
            'ma': 'ac|co|gov|m|net|org|press',
            'mc': 'asso|tm',
            'me': 'ac|co|edu|gov|its|net|org|priv',
            'mg': 'com|edu|gov|mil|nom|org|prd|tm',
            'mk': 'com|edu|gov|inf|name|net|org|pro',
            'ml': 'com|edu|gov|net|org|presse',
            'mn': 'edu|gov|org',
            'mo': 'com|edu|gov|net|org',
            'mt': 'com|edu|gov|net|org',
            'mv': 'aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro',
            'mw': 'ac|co|com|coop|edu|gov|int|museum|net|org',
            'mx': 'com|edu|gob|net|org',
            'my': 'com|edu|gov|mil|name|net|org|sch',
            'nf': 'arts|com|firm|info|net|other|per|rec|store|web',
            'ng': 'biz|com|edu|gov|mil|mobi|name|net|org|sch',
            'ni': 'ac|co|com|edu|gob|mil|net|nom|org',
            'np': 'com|edu|gov|mil|net|org',
            'nr': 'biz|com|edu|gov|info|net|org',
            'om': 'ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch',
            'pe': 'com|edu|gob|mil|net|nom|org|sld',
            'ph': 'com|edu|gov|i|mil|net|ngo|org',
            'pk': 'biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web',
            'pl': 'art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora',
            'pr': 'ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof',
            'ps': 'com|edu|gov|net|org|plo|sec',
            'pw': 'belau|co|ed|go|ne|or',
            'ro': 'arts|com|firm|info|nom|nt|org|rec|store|tm|www',
            'rs': 'ac|co|edu|gov|in|org',
            'sb': 'com|edu|gov|net|org',
            'sc': 'com|edu|gov|net|org',
            'sh': 'co|com|edu|gov|net|nom|org',
            'sl': 'com|edu|gov|net|org',
            'st': 'co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store',
            'sv': 'com|edu|gob|org|red',
            'sz': 'ac|co|org',
            'tr': 'av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web',
            'tt': 'aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel',
            'tw': 'club|com|ebiz|edu|game|gov|idv|mil|net|org',
            'mu': 'ac|co|com|gov|net|or|org',
            'mz': 'ac|co|edu|gov|org',
            'na': 'co|com',
            'nz': 'ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school',
            'pa': 'abo|ac|com|edu|gob|ing|med|net|nom|org|sld',
            'pt': 'com|edu|gov|int|net|nome|org|publ',
            'py': 'com|edu|gov|mil|net|org',
            'qa': 'com|edu|gov|mil|net|org',
            're': 'asso|com|nom',
            'ru': 'ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk',
            'rw': 'ac|co|com|edu|gouv|gov|int|mil|net',
            'sa': 'com|edu|gov|med|net|org|pub|sch',
            'sd': 'com|edu|gov|info|med|net|org|tv',
            'se': 'a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z',
            'sg': 'com|edu|gov|idn|net|org|per',
            'sn': 'art|com|edu|gouv|org|perso|univ',
            'sy': 'com|edu|gov|mil|net|news|org',
            'th': 'ac|co|go|in|mi|net|or',
            'tj': 'ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web',
            'tn': 'agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism',
            'tz': 'ac|co|go|ne|or',
            'ua': 'biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt',
            'ug': 'ac|co|go|ne|or|org|sc',
            'uk': 'ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc',
            'us': 'dni|fed|isa|kids|nsn',
            'uy': 'com|edu|gub|mil|net|org',
            've': 'co|com|edu|gob|info|mil|net|org|web',
            'vi': 'co|com|k12|net|org',
            'vn': 'ac|biz|com|edu|gov|health|info|int|name|net|org|pro',
            'ye': 'co|com|gov|ltd|me|net|org|plc',
            'yu': 'ac|co|edu|gov|org',
            'za': 'ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web',
            'zm': 'ac|co|com|edu|gov|net|org|sch'
        },
        has_expression: null,
        is_expression: null,
        has: function (domain) {
            return !!domain.match(SLD.has_expression);
        },
        is: function (domain) {
            return !!domain.match(SLD.is_expression);
        },
        get: function (domain) {
            var t = domain.match(SLD.has_expression);
            return t && t[1] || null;
        },
        init: function () {
            var t = '';
            for (var tld in SLD.list) {
                if (!hasOwn.call(SLD.list, tld)) {
                    continue;
                }
                var expression = '(' + SLD.list[tld] + ').' + tld;
                t += '|(' + expression + ')';
            }
            SLD.has_expression = new RegExp('\\.(' + t.substr(1) + ')$', 'i');
            SLD.is_expression = new RegExp('^(' + t.substr(1) + ')$', 'i');
        }
    };
    SLD.init();
    return SLD;
});

define('urijs/URI', [
    'require',
    'exports',
    'module',
    './punycode',
    './IPv6',
    './SecondLevelDomains'
], function (require, exports, module) {
    var punycode = require('./punycode');
    var IPv6 = require('./IPv6');
    var SLD = require('./SecondLevelDomains');
    function URI(url, base) {
        if (!(this instanceof URI)) {
            return new URI(url, base);
        }
        if (url === undefined) {
            if (typeof location !== 'undefined') {
                url = location.href + '';
            } else {
                url = '';
            }
        }
        this.href(url);
        if (base !== undefined) {
            return this.absoluteTo(base);
        }
        return this;
    }
    ;
    URI.version = '1.12.0';
    var p = URI.prototype;
    var hasOwn = Object.prototype.hasOwnProperty;
    function escapeRegEx(string) {
        return string.replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
    }
    function getType(value) {
        if (value === undefined) {
            return 'Undefined';
        }
        return String(Object.prototype.toString.call(value)).slice(8, -1);
    }
    function isArray(obj) {
        return getType(obj) === 'Array';
    }
    function filterArrayValues(data, value) {
        var lookup = {};
        var i, length;
        if (isArray(value)) {
            for (i = 0, length = value.length; i < length; i++) {
                lookup[value[i]] = true;
            }
        } else {
            lookup[value] = true;
        }
        for (i = 0, length = data.length; i < length; i++) {
            if (lookup[data[i]] !== undefined) {
                data.splice(i, 1);
                length--;
                i--;
            }
        }
        return data;
    }
    function arrayContains(list, value) {
        var i, length;
        if (isArray(value)) {
            for (i = 0, length = value.length; i < length; i++) {
                if (!arrayContains(list, value[i])) {
                    return false;
                }
            }
            return true;
        }
        var _type = getType(value);
        for (i = 0, length = list.length; i < length; i++) {
            if (_type === 'RegExp') {
                if (typeof list[i] === 'string' && list[i].match(value)) {
                    return true;
                }
            } else if (list[i] === value) {
                return true;
            }
        }
        return false;
    }
    function arraysEqual(one, two) {
        if (!isArray(one) || !isArray(two)) {
            return false;
        }
        if (one.length !== two.length) {
            return false;
        }
        one.sort();
        two.sort();
        for (var i = 0, l = one.length; i < l; i++) {
            if (one[i] !== two[i]) {
                return false;
            }
        }
        return true;
    }
    URI._parts = function () {
        return {
            protocol: null,
            username: null,
            password: null,
            hostname: null,
            urn: null,
            port: null,
            path: null,
            query: null,
            fragment: null,
            duplicateQueryParameters: URI.duplicateQueryParameters,
            escapeQuerySpace: URI.escapeQuerySpace
        };
    };
    URI.duplicateQueryParameters = false;
    URI.escapeQuerySpace = true;
    URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;
    URI.idn_expression = /[^a-z0-9\.-]/i;
    URI.punycode_expression = /(xn--)/i;
    URI.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;
    URI.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
    URI.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig;
    URI.findUri = {
        start: /\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,
        end: /[\s\r\n]|$/,
        trim: /[`!()\[\]{};:'".,<>?«»“”„‘’]+$/
    };
    URI.defaultPorts = {
        http: '80',
        https: '443',
        ftp: '21',
        gopher: '70',
        ws: '80',
        wss: '443'
    };
    URI.invalid_hostname_characters = /[^a-zA-Z0-9\.-]/;
    URI.domAttributes = {
        'a': 'href',
        'blockquote': 'cite',
        'link': 'href',
        'base': 'href',
        'script': 'src',
        'form': 'action',
        'img': 'src',
        'area': 'href',
        'iframe': 'src',
        'embed': 'src',
        'source': 'src',
        'track': 'src',
        'input': 'src'
    };
    URI.getDomAttribute = function (node) {
        if (!node || !node.nodeName) {
            return undefined;
        }
        var nodeName = node.nodeName.toLowerCase();
        if (nodeName === 'input' && node.type !== 'image') {
            return undefined;
        }
        return URI.domAttributes[nodeName];
    };
    function escapeForDumbFirefox36(value) {
        return escape(value);
    }
    function strictEncodeURIComponent(string) {
        return encodeURIComponent(string).replace(/[!'()*]/g, escapeForDumbFirefox36).replace(/\*/g, '%2A');
    }
    URI.encode = strictEncodeURIComponent;
    URI.decode = decodeURIComponent;
    URI.iso8859 = function () {
        URI.encode = escape;
        URI.decode = unescape;
    };
    URI.unicode = function () {
        URI.encode = strictEncodeURIComponent;
        URI.decode = decodeURIComponent;
    };
    URI.characters = {
        pathname: {
            encode: {
                expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,
                map: {
                    '%24': '$',
                    '%26': '&',
                    '%2B': '+',
                    '%2C': ',',
                    '%3B': ';',
                    '%3D': '=',
                    '%3A': ':',
                    '%40': '@'
                }
            },
            decode: {
                expression: /[\/\?#]/g,
                map: {
                    '/': '%2F',
                    '?': '%3F',
                    '#': '%23'
                }
            }
        },
        reserved: {
            encode: {
                expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,
                map: {
                    '%3A': ':',
                    '%2F': '/',
                    '%3F': '?',
                    '%23': '#',
                    '%5B': '[',
                    '%5D': ']',
                    '%40': '@',
                    '%21': '!',
                    '%24': '$',
                    '%26': '&',
                    '%27': '\'',
                    '%28': '(',
                    '%29': ')',
                    '%2A': '*',
                    '%2B': '+',
                    '%2C': ',',
                    '%3B': ';',
                    '%3D': '='
                }
            }
        }
    };
    URI.encodeQuery = function (string, escapeQuerySpace) {
        var escaped = URI.encode(string + '');
        return escapeQuerySpace ? escaped.replace(/%20/g, '+') : escaped;
    };
    URI.decodeQuery = function (string, escapeQuerySpace) {
        string += '';
        try {
            return URI.decode(escapeQuerySpace ? string.replace(/\+/g, '%20') : string);
        } catch (e) {
            return string;
        }
    };
    URI.recodePath = function (string) {
        var segments = (string + '').split('/');
        for (var i = 0, length = segments.length; i < length; i++) {
            segments[i] = URI.encodePathSegment(URI.decode(segments[i]));
        }
        return segments.join('/');
    };
    URI.decodePath = function (string) {
        var segments = (string + '').split('/');
        for (var i = 0, length = segments.length; i < length; i++) {
            segments[i] = URI.decodePathSegment(segments[i]);
        }
        return segments.join('/');
    };
    var _parts = {
        'encode': 'encode',
        'decode': 'decode'
    };
    var _part;
    var generateAccessor = function (_group, _part) {
        return function (string) {
            return URI[_part](string + '').replace(URI.characters[_group][_part].expression, function (c) {
                return URI.characters[_group][_part].map[c];
            });
        };
    };
    for (_part in _parts) {
        URI[_part + 'PathSegment'] = generateAccessor('pathname', _parts[_part]);
    }
    URI.encodeReserved = generateAccessor('reserved', 'encode');
    URI.parse = function (string, parts) {
        var pos;
        if (!parts) {
            parts = {};
        }
        pos = string.indexOf('#');
        if (pos > -1) {
            parts.fragment = string.substring(pos + 1) || null;
            string = string.substring(0, pos);
        }
        pos = string.indexOf('?');
        if (pos > -1) {
            parts.query = string.substring(pos + 1) || null;
            string = string.substring(0, pos);
        }
        if (string.substring(0, 2) === '//') {
            parts.protocol = null;
            string = string.substring(2);
            string = URI.parseAuthority(string, parts);
        } else {
            pos = string.indexOf(':');
            if (pos > -1) {
                parts.protocol = string.substring(0, pos) || null;
                if (parts.protocol && !parts.protocol.match(URI.protocol_expression)) {
                    parts.protocol = undefined;
                } else if (parts.protocol === 'file') {
                    string = string.substring(pos + 3);
                } else if (string.substring(pos + 1, pos + 3) === '//') {
                    string = string.substring(pos + 3);
                    string = URI.parseAuthority(string, parts);
                } else {
                    string = string.substring(pos + 1);
                    parts.urn = true;
                }
            }
        }
        parts.path = string;
        return parts;
    };
    URI.parseHost = function (string, parts) {
        var pos = string.indexOf('/');
        var bracketPos;
        var t;
        if (pos === -1) {
            pos = string.length;
        }
        if (string.charAt(0) === '[') {
            bracketPos = string.indexOf(']');
            parts.hostname = string.substring(1, bracketPos) || null;
            parts.port = string.substring(bracketPos + 2, pos) || null;
        } else if (string.indexOf(':') !== string.lastIndexOf(':')) {
            parts.hostname = string.substring(0, pos) || null;
            parts.port = null;
        } else {
            t = string.substring(0, pos).split(':');
            parts.hostname = t[0] || null;
            parts.port = t[1] || null;
        }
        if (parts.hostname && string.substring(pos).charAt(0) !== '/') {
            pos++;
            string = '/' + string;
        }
        return string.substring(pos) || '/';
    };
    URI.parseAuthority = function (string, parts) {
        string = URI.parseUserinfo(string, parts);
        return URI.parseHost(string, parts);
    };
    URI.parseUserinfo = function (string, parts) {
        var firstSlash = string.indexOf('/');
        var pos = firstSlash > -1 ? string.lastIndexOf('@', firstSlash) : string.indexOf('@');
        var t;
        if (pos > -1 && (firstSlash === -1 || pos < firstSlash)) {
            t = string.substring(0, pos).split(':');
            parts.username = t[0] ? URI.decode(t[0]) : null;
            t.shift();
            parts.password = t[0] ? URI.decode(t.join(':')) : null;
            string = string.substring(pos + 1);
        } else {
            parts.username = null;
            parts.password = null;
        }
        return string;
    };
    URI.parseQuery = function (string, escapeQuerySpace) {
        if (!string) {
            return {};
        }
        string = string.replace(/&+/g, '&').replace(/^\?*&*|&+$/g, '');
        if (!string) {
            return {};
        }
        var items = {};
        var splits = string.split('&');
        var length = splits.length;
        var v, name, value;
        for (var i = 0; i < length; i++) {
            v = splits[i].split('=');
            name = URI.decodeQuery(v.shift(), escapeQuerySpace);
            value = v.length ? URI.decodeQuery(v.join('='), escapeQuerySpace) : null;
            if (items[name]) {
                if (typeof items[name] === 'string') {
                    items[name] = [items[name]];
                }
                items[name].push(value);
            } else {
                items[name] = value;
            }
        }
        return items;
    };
    URI.build = function (parts) {
        var t = '';
        if (parts.protocol) {
            t += parts.protocol + ':';
        }
        if (!parts.urn && (t || parts.hostname)) {
            t += '//';
        }
        t += URI.buildAuthority(parts) || '';
        if (typeof parts.path === 'string') {
            if (parts.path.charAt(0) !== '/' && typeof parts.hostname === 'string') {
                t += '/';
            }
            t += parts.path;
        }
        if (typeof parts.query === 'string' && parts.query) {
            t += '?' + parts.query;
        }
        if (typeof parts.fragment === 'string' && parts.fragment) {
            t += '#' + parts.fragment;
        }
        return t;
    };
    URI.buildHost = function (parts) {
        var t = '';
        if (!parts.hostname) {
            return '';
        } else if (URI.ip6_expression.test(parts.hostname)) {
            if (parts.port) {
                t += '[' + parts.hostname + ']:' + parts.port;
            } else {
                t += parts.hostname;
            }
        } else {
            t += parts.hostname;
            if (parts.port) {
                t += ':' + parts.port;
            }
        }
        return t;
    };
    URI.buildAuthority = function (parts) {
        return URI.buildUserinfo(parts) + URI.buildHost(parts);
    };
    URI.buildUserinfo = function (parts) {
        var t = '';
        if (parts.username) {
            t += URI.encode(parts.username);
            if (parts.password) {
                t += ':' + URI.encode(parts.password);
            }
            t += '@';
        }
        return t;
    };
    URI.buildQuery = function (data, duplicateQueryParameters, escapeQuerySpace) {
        var t = '';
        var unique, key, i, length;
        for (key in data) {
            if (hasOwn.call(data, key) && key) {
                if (isArray(data[key])) {
                    unique = {};
                    for (i = 0, length = data[key].length; i < length; i++) {
                        if (data[key][i] !== undefined && unique[data[key][i] + ''] === undefined) {
                            t += '&' + URI.buildQueryParameter(key, data[key][i], escapeQuerySpace);
                            if (duplicateQueryParameters !== true) {
                                unique[data[key][i] + ''] = true;
                            }
                        }
                    }
                } else if (data[key] !== undefined) {
                    t += '&' + URI.buildQueryParameter(key, data[key], escapeQuerySpace);
                }
            }
        }
        return t.substring(1);
    };
    URI.buildQueryParameter = function (name, value, escapeQuerySpace) {
        return URI.encodeQuery(name, escapeQuerySpace) + (value !== null ? '=' + URI.encodeQuery(value, escapeQuerySpace) : '');
    };
    URI.addQuery = function (data, name, value) {
        if (typeof name === 'object') {
            for (var key in name) {
                if (hasOwn.call(name, key)) {
                    URI.addQuery(data, key, name[key]);
                }
            }
        } else if (typeof name === 'string') {
            if (data[name] === undefined) {
                data[name] = value;
                return;
            } else if (typeof data[name] === 'string') {
                data[name] = [data[name]];
            }
            if (!isArray(value)) {
                value = [value];
            }
            data[name] = data[name].concat(value);
        } else {
            throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');
        }
    };
    URI.removeQuery = function (data, name, value) {
        var i, length, key;
        if (isArray(name)) {
            for (i = 0, length = name.length; i < length; i++) {
                data[name[i]] = undefined;
            }
        } else if (typeof name === 'object') {
            for (key in name) {
                if (hasOwn.call(name, key)) {
                    URI.removeQuery(data, key, name[key]);
                }
            }
        } else if (typeof name === 'string') {
            if (value !== undefined) {
                if (data[name] === value) {
                    data[name] = undefined;
                } else if (isArray(data[name])) {
                    data[name] = filterArrayValues(data[name], value);
                }
            } else {
                data[name] = undefined;
            }
        } else {
            throw new TypeError('URI.addQuery() accepts an object, string as the first parameter');
        }
    };
    URI.hasQuery = function (data, name, value, withinArray) {
        if (typeof name === 'object') {
            for (var key in name) {
                if (hasOwn.call(name, key)) {
                    if (!URI.hasQuery(data, key, name[key])) {
                        return false;
                    }
                }
            }
            return true;
        } else if (typeof name !== 'string') {
            throw new TypeError('URI.hasQuery() accepts an object, string as the name parameter');
        }
        switch (getType(value)) {
        case 'Undefined':
            return name in data;
        case 'Boolean':
            var _booly = Boolean(isArray(data[name]) ? data[name].length : data[name]);
            return value === _booly;
        case 'Function':
            return !!value(data[name], name, data);
        case 'Array':
            if (!isArray(data[name])) {
                return false;
            }
            var op = withinArray ? arrayContains : arraysEqual;
            return op(data[name], value);
        case 'RegExp':
            if (!isArray(data[name])) {
                return Boolean(data[name] && data[name].match(value));
            }
            if (!withinArray) {
                return false;
            }
            return arrayContains(data[name], value);
        case 'Number':
            value = String(value);
        case 'String':
            if (!isArray(data[name])) {
                return data[name] === value;
            }
            if (!withinArray) {
                return false;
            }
            return arrayContains(data[name], value);
        default:
            throw new TypeError('URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter');
        }
    };
    URI.commonPath = function (one, two) {
        var length = Math.min(one.length, two.length);
        var pos;
        for (pos = 0; pos < length; pos++) {
            if (one.charAt(pos) !== two.charAt(pos)) {
                pos--;
                break;
            }
        }
        if (pos < 1) {
            return one.charAt(0) === two.charAt(0) && one.charAt(0) === '/' ? '/' : '';
        }
        if (one.charAt(pos) !== '/' || two.charAt(pos) !== '/') {
            pos = one.substring(0, pos).lastIndexOf('/');
        }
        return one.substring(0, pos + 1);
    };
    URI.withinString = function (string, callback, options) {
        options || (options = {});
        var _start = options.start || URI.findUri.start;
        var _end = options.end || URI.findUri.end;
        var _trim = options.trim || URI.findUri.trim;
        var _attributeOpen = /[a-z0-9-]=["']?$/i;
        _start.lastIndex = 0;
        while (true) {
            var match = _start.exec(string);
            if (!match) {
                break;
            }
            var start = match.index;
            if (options.ignoreHtml) {
                var attributeOpen = string.slice(Math.max(start - 3, 0), start);
                if (attributeOpen && _attributeOpen.test(attributeOpen)) {
                    continue;
                }
            }
            var end = start + string.slice(start).search(_end);
            var slice = string.slice(start, end).replace(_trim, '');
            if (options.ignore && options.ignore.test(slice)) {
                continue;
            }
            end = start + slice.length;
            var result = callback(slice, start, end, string);
            string = string.slice(0, start) + result + string.slice(end);
            _start.lastIndex = start + result.length;
        }
        _start.lastIndex = 0;
        return string;
    };
    URI.ensureValidHostname = function (v) {
        if (v.match(URI.invalid_hostname_characters)) {
            if (!punycode) {
                throw new TypeError('Hostname \'' + v + '\' contains characters other than [A-Z0-9.-] and Punycode.js is not available');
            }
            if (punycode.toASCII(v).match(URI.invalid_hostname_characters)) {
                throw new TypeError('Hostname \'' + v + '\' contains characters other than [A-Z0-9.-]');
            }
        }
    };
    p.build = function (deferBuild) {
        if (deferBuild === true) {
            this._deferred_build = true;
        } else if (deferBuild === undefined || this._deferred_build) {
            this._string = URI.build(this._parts);
            this._deferred_build = false;
        }
        return this;
    };
    p.clone = function () {
        return new URI(this);
    };
    p.valueOf = p.toString = function () {
        return this.build(false)._string;
    };
    _parts = {
        protocol: 'protocol',
        username: 'username',
        password: 'password',
        hostname: 'hostname',
        port: 'port'
    };
    generateAccessor = function (_part) {
        return function (v, build) {
            if (v === undefined) {
                return this._parts[_part] || '';
            } else {
                this._parts[_part] = v || null;
                this.build(!build);
                return this;
            }
        };
    };
    for (_part in _parts) {
        p[_part] = generateAccessor(_parts[_part]);
    }
    _parts = {
        query: '?',
        fragment: '#'
    };
    generateAccessor = function (_part, _key) {
        return function (v, build) {
            if (v === undefined) {
                return this._parts[_part] || '';
            } else {
                if (v !== null) {
                    v = v + '';
                    if (v.charAt(0) === _key) {
                        v = v.substring(1);
                    }
                }
                this._parts[_part] = v;
                this.build(!build);
                return this;
            }
        };
    };
    for (_part in _parts) {
        p[_part] = generateAccessor(_part, _parts[_part]);
    }
    _parts = {
        search: [
            '?',
            'query'
        ],
        hash: [
            '#',
            'fragment'
        ]
    };
    generateAccessor = function (_part, _key) {
        return function (v, build) {
            var t = this[_part](v, build);
            return typeof t === 'string' && t.length ? _key + t : t;
        };
    };
    for (_part in _parts) {
        p[_part] = generateAccessor(_parts[_part][1], _parts[_part][0]);
    }
    p.pathname = function (v, build) {
        if (v === undefined || v === true) {
            var res = this._parts.path || (this._parts.hostname ? '/' : '');
            return v ? URI.decodePath(res) : res;
        } else {
            this._parts.path = v ? URI.recodePath(v) : '/';
            this.build(!build);
            return this;
        }
    };
    p.path = p.pathname;
    p.href = function (href, build) {
        var key;
        if (href === undefined) {
            return this.toString();
        }
        this._string = '';
        this._parts = URI._parts();
        var _URI = href instanceof URI;
        var _object = typeof href === 'object' && (href.hostname || href.path || href.pathname);
        if (href.nodeName) {
            var attribute = URI.getDomAttribute(href);
            href = href[attribute] || '';
            _object = false;
        }
        if (!_URI && _object && href.pathname !== undefined) {
            href = href.toString();
        }
        if (typeof href === 'string') {
            this._parts = URI.parse(href, this._parts);
        } else if (_URI || _object) {
            var src = _URI ? href._parts : href;
            for (key in src) {
                if (hasOwn.call(this._parts, key)) {
                    this._parts[key] = src[key];
                }
            }
        } else {
            throw new TypeError('invalid input');
        }
        this.build(!build);
        return this;
    };
    p.is = function (what) {
        var ip = false;
        var ip4 = false;
        var ip6 = false;
        var name = false;
        var sld = false;
        var idn = false;
        var punycode = false;
        var relative = !this._parts.urn;
        if (this._parts.hostname) {
            relative = false;
            ip4 = URI.ip4_expression.test(this._parts.hostname);
            ip6 = URI.ip6_expression.test(this._parts.hostname);
            ip = ip4 || ip6;
            name = !ip;
            sld = name && SLD && SLD.has(this._parts.hostname);
            idn = name && URI.idn_expression.test(this._parts.hostname);
            punycode = name && URI.punycode_expression.test(this._parts.hostname);
        }
        switch (what.toLowerCase()) {
        case 'relative':
            return relative;
        case 'absolute':
            return !relative;
        case 'domain':
        case 'name':
            return name;
        case 'sld':
            return sld;
        case 'ip':
            return ip;
        case 'ip4':
        case 'ipv4':
        case 'inet4':
            return ip4;
        case 'ip6':
        case 'ipv6':
        case 'inet6':
            return ip6;
        case 'idn':
            return idn;
        case 'url':
            return !this._parts.urn;
        case 'urn':
            return !!this._parts.urn;
        case 'punycode':
            return punycode;
        }
        return null;
    };
    var _protocol = p.protocol;
    var _port = p.port;
    var _hostname = p.hostname;
    p.protocol = function (v, build) {
        if (v !== undefined) {
            if (v) {
                v = v.replace(/:(\/\/)?$/, '');
                if (!v.match(URI.protocol_expression)) {
                    throw new TypeError('Protocol \'' + v + '\' contains characters other than [A-Z0-9.+-] or doesn\'t start with [A-Z]');
                }
            }
        }
        return _protocol.call(this, v, build);
    };
    p.scheme = p.protocol;
    p.port = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v !== undefined) {
            if (v === 0) {
                v = null;
            }
            if (v) {
                v += '';
                if (v.charAt(0) === ':') {
                    v = v.substring(1);
                }
                if (v.match(/[^0-9]/)) {
                    throw new TypeError('Port \'' + v + '\' contains characters other than [0-9]');
                }
            }
        }
        return _port.call(this, v, build);
    };
    p.hostname = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v !== undefined) {
            var x = {};
            URI.parseHost(v, x);
            v = x.hostname;
        }
        return _hostname.call(this, v, build);
    };
    p.host = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v === undefined) {
            return this._parts.hostname ? URI.buildHost(this._parts) : '';
        } else {
            URI.parseHost(v, this._parts);
            this.build(!build);
            return this;
        }
    };
    p.authority = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v === undefined) {
            return this._parts.hostname ? URI.buildAuthority(this._parts) : '';
        } else {
            URI.parseAuthority(v, this._parts);
            this.build(!build);
            return this;
        }
    };
    p.userinfo = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v === undefined) {
            if (!this._parts.username) {
                return '';
            }
            var t = URI.buildUserinfo(this._parts);
            return t.substring(0, t.length - 1);
        } else {
            if (v[v.length - 1] !== '@') {
                v += '@';
            }
            URI.parseUserinfo(v, this._parts);
            this.build(!build);
            return this;
        }
    };
    p.resource = function (v, build) {
        var parts;
        if (v === undefined) {
            return this.path() + this.search() + this.hash();
        }
        parts = URI.parse(v);
        this._parts.path = parts.path;
        this._parts.query = parts.query;
        this._parts.fragment = parts.fragment;
        this.build(!build);
        return this;
    };
    p.subdomain = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v === undefined) {
            if (!this._parts.hostname || this.is('IP')) {
                return '';
            }
            var end = this._parts.hostname.length - this.domain().length - 1;
            return this._parts.hostname.substring(0, end) || '';
        } else {
            var e = this._parts.hostname.length - this.domain().length;
            var sub = this._parts.hostname.substring(0, e);
            var replace = new RegExp('^' + escapeRegEx(sub));
            if (v && v.charAt(v.length - 1) !== '.') {
                v += '.';
            }
            if (v) {
                URI.ensureValidHostname(v);
            }
            this._parts.hostname = this._parts.hostname.replace(replace, v);
            this.build(!build);
            return this;
        }
    };
    p.domain = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (typeof v === 'boolean') {
            build = v;
            v = undefined;
        }
        if (v === undefined) {
            if (!this._parts.hostname || this.is('IP')) {
                return '';
            }
            var t = this._parts.hostname.match(/\./g);
            if (t && t.length < 2) {
                return this._parts.hostname;
            }
            var end = this._parts.hostname.length - this.tld(build).length - 1;
            end = this._parts.hostname.lastIndexOf('.', end - 1) + 1;
            return this._parts.hostname.substring(end) || '';
        } else {
            if (!v) {
                throw new TypeError('cannot set domain empty');
            }
            URI.ensureValidHostname(v);
            if (!this._parts.hostname || this.is('IP')) {
                this._parts.hostname = v;
            } else {
                var replace = new RegExp(escapeRegEx(this.domain()) + '$');
                this._parts.hostname = this._parts.hostname.replace(replace, v);
            }
            this.build(!build);
            return this;
        }
    };
    p.tld = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (typeof v === 'boolean') {
            build = v;
            v = undefined;
        }
        if (v === undefined) {
            if (!this._parts.hostname || this.is('IP')) {
                return '';
            }
            var pos = this._parts.hostname.lastIndexOf('.');
            var tld = this._parts.hostname.substring(pos + 1);
            if (build !== true && SLD && SLD.list[tld.toLowerCase()]) {
                return SLD.get(this._parts.hostname) || tld;
            }
            return tld;
        } else {
            var replace;
            if (!v) {
                throw new TypeError('cannot set TLD empty');
            } else if (v.match(/[^a-zA-Z0-9-]/)) {
                if (SLD && SLD.is(v)) {
                    replace = new RegExp(escapeRegEx(this.tld()) + '$');
                    this._parts.hostname = this._parts.hostname.replace(replace, v);
                } else {
                    throw new TypeError('TLD \'' + v + '\' contains characters other than [A-Z0-9]');
                }
            } else if (!this._parts.hostname || this.is('IP')) {
                throw new ReferenceError('cannot set TLD on non-domain host');
            } else {
                replace = new RegExp(escapeRegEx(this.tld()) + '$');
                this._parts.hostname = this._parts.hostname.replace(replace, v);
            }
            this.build(!build);
            return this;
        }
    };
    p.directory = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v === undefined || v === true) {
            if (!this._parts.path && !this._parts.hostname) {
                return '';
            }
            if (this._parts.path === '/') {
                return '/';
            }
            var end = this._parts.path.length - this.filename().length - 1;
            var res = this._parts.path.substring(0, end) || (this._parts.hostname ? '/' : '');
            return v ? URI.decodePath(res) : res;
        } else {
            var e = this._parts.path.length - this.filename().length;
            var directory = this._parts.path.substring(0, e);
            var replace = new RegExp('^' + escapeRegEx(directory));
            if (!this.is('relative')) {
                if (!v) {
                    v = '/';
                }
                if (v.charAt(0) !== '/') {
                    v = '/' + v;
                }
            }
            if (v && v.charAt(v.length - 1) !== '/') {
                v += '/';
            }
            v = URI.recodePath(v);
            this._parts.path = this._parts.path.replace(replace, v);
            this.build(!build);
            return this;
        }
    };
    p.filename = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v === undefined || v === true) {
            if (!this._parts.path || this._parts.path === '/') {
                return '';
            }
            var pos = this._parts.path.lastIndexOf('/');
            var res = this._parts.path.substring(pos + 1);
            return v ? URI.decodePathSegment(res) : res;
        } else {
            var mutatedDirectory = false;
            if (v.charAt(0) === '/') {
                v = v.substring(1);
            }
            if (v.match(/\.?\//)) {
                mutatedDirectory = true;
            }
            var replace = new RegExp(escapeRegEx(this.filename()) + '$');
            v = URI.recodePath(v);
            this._parts.path = this._parts.path.replace(replace, v);
            if (mutatedDirectory) {
                this.normalizePath(build);
            } else {
                this.build(!build);
            }
            return this;
        }
    };
    p.suffix = function (v, build) {
        if (this._parts.urn) {
            return v === undefined ? '' : this;
        }
        if (v === undefined || v === true) {
            if (!this._parts.path || this._parts.path === '/') {
                return '';
            }
            var filename = this.filename();
            var pos = filename.lastIndexOf('.');
            var s, res;
            if (pos === -1) {
                return '';
            }
            s = filename.substring(pos + 1);
            res = /^[a-z0-9%]+$/i.test(s) ? s : '';
            return v ? URI.decodePathSegment(res) : res;
        } else {
            if (v.charAt(0) === '.') {
                v = v.substring(1);
            }
            var suffix = this.suffix();
            var replace;
            if (!suffix) {
                if (!v) {
                    return this;
                }
                this._parts.path += '.' + URI.recodePath(v);
            } else if (!v) {
                replace = new RegExp(escapeRegEx('.' + suffix) + '$');
            } else {
                replace = new RegExp(escapeRegEx(suffix) + '$');
            }
            if (replace) {
                v = URI.recodePath(v);
                this._parts.path = this._parts.path.replace(replace, v);
            }
            this.build(!build);
            return this;
        }
    };
    p.segment = function (segment, v, build) {
        var separator = this._parts.urn ? ':' : '/';
        var path = this.path();
        var absolute = path.substring(0, 1) === '/';
        var segments = path.split(separator);
        if (segment !== undefined && typeof segment !== 'number') {
            build = v;
            v = segment;
            segment = undefined;
        }
        if (segment !== undefined && typeof segment !== 'number') {
            throw new Error('Bad segment \'' + segment + '\', must be 0-based integer');
        }
        if (absolute) {
            segments.shift();
        }
        if (segment < 0) {
            segment = Math.max(segments.length + segment, 0);
        }
        if (v === undefined) {
            return segment === undefined ? segments : segments[segment];
        } else if (segment === null || segments[segment] === undefined) {
            if (isArray(v)) {
                segments = [];
                for (var i = 0, l = v.length; i < l; i++) {
                    if (!v[i].length && (!segments.length || !segments[segments.length - 1].length)) {
                        continue;
                    }
                    if (segments.length && !segments[segments.length - 1].length) {
                        segments.pop();
                    }
                    segments.push(v[i]);
                }
            } else if (v || typeof v === 'string') {
                if (segments[segments.length - 1] === '') {
                    segments[segments.length - 1] = v;
                } else {
                    segments.push(v);
                }
            }
        } else {
            if (v || typeof v === 'string' && v.length) {
                segments[segment] = v;
            } else {
                segments.splice(segment, 1);
            }
        }
        if (absolute) {
            segments.unshift('');
        }
        return this.path(segments.join(separator), build);
    };
    p.segmentCoded = function (segment, v, build) {
        var segments, i, l;
        if (typeof segment !== 'number') {
            build = v;
            v = segment;
            segment = undefined;
        }
        if (v === undefined) {
            segments = this.segment(segment, v, build);
            if (!isArray(segments)) {
                segments = segments !== undefined ? URI.decode(segments) : undefined;
            } else {
                for (i = 0, l = segments.length; i < l; i++) {
                    segments[i] = URI.decode(segments[i]);
                }
            }
            return segments;
        }
        if (!isArray(v)) {
            v = typeof v === 'string' ? URI.encode(v) : v;
        } else {
            for (i = 0, l = v.length; i < l; i++) {
                v[i] = URI.decode(v[i]);
            }
        }
        return this.segment(segment, v, build);
    };
    var q = p.query;
    p.query = function (v, build) {
        if (v === true) {
            return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        } else if (typeof v === 'function') {
            var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
            var result = v.call(this, data);
            this._parts.query = URI.buildQuery(result || data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
            this.build(!build);
            return this;
        } else if (v !== undefined && typeof v !== 'string') {
            this._parts.query = URI.buildQuery(v, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
            this.build(!build);
            return this;
        } else {
            return q.call(this, v, build);
        }
    };
    p.setQuery = function (name, value, build) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        if (typeof name === 'object') {
            for (var key in name) {
                if (hasOwn.call(name, key)) {
                    data[key] = name[key];
                }
            }
        } else if (typeof name === 'string') {
            data[name] = value !== undefined ? value : null;
        } else {
            throw new TypeError('URI.addQuery() accepts an object, string as the name parameter');
        }
        this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
        if (typeof name !== 'string') {
            build = value;
        }
        this.build(!build);
        return this;
    };
    p.addQuery = function (name, value, build) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        URI.addQuery(data, name, value === undefined ? null : value);
        this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
        if (typeof name !== 'string') {
            build = value;
        }
        this.build(!build);
        return this;
    };
    p.removeQuery = function (name, value, build) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        URI.removeQuery(data, name, value);
        this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);
        if (typeof name !== 'string') {
            build = value;
        }
        this.build(!build);
        return this;
    };
    p.hasQuery = function (name, value, withinArray) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return URI.hasQuery(data, name, value, withinArray);
    };
    p.setSearch = p.setQuery;
    p.addSearch = p.addQuery;
    p.removeSearch = p.removeQuery;
    p.hasSearch = p.hasQuery;
    p.normalize = function () {
        if (this._parts.urn) {
            return this.normalizeProtocol(false).normalizeQuery(false).normalizeFragment(false).build();
        }
        return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build();
    };
    p.normalizeProtocol = function (build) {
        if (typeof this._parts.protocol === 'string') {
            this._parts.protocol = this._parts.protocol.toLowerCase();
            this.build(!build);
        }
        return this;
    };
    p.normalizeHostname = function (build) {
        if (this._parts.hostname) {
            if (this.is('IDN') && punycode) {
                this._parts.hostname = punycode.toASCII(this._parts.hostname);
            } else if (this.is('IPv6') && IPv6) {
                this._parts.hostname = IPv6.best(this._parts.hostname);
            }
            this._parts.hostname = this._parts.hostname.toLowerCase();
            this.build(!build);
        }
        return this;
    };
    p.normalizePort = function (build) {
        if (typeof this._parts.protocol === 'string' && this._parts.port === URI.defaultPorts[this._parts.protocol]) {
            this._parts.port = null;
            this.build(!build);
        }
        return this;
    };
    p.normalizePath = function (build) {
        if (this._parts.urn) {
            return this;
        }
        if (!this._parts.path || this._parts.path === '/') {
            return this;
        }
        var _was_relative;
        var _path = this._parts.path;
        var _leadingParents = '';
        var _parent, _pos;
        if (_path.charAt(0) !== '/') {
            _was_relative = true;
            _path = '/' + _path;
        }
        _path = _path.replace(/(\/(\.\/)+)|(\/\.$)/g, '/').replace(/\/{2,}/g, '/');
        if (_was_relative) {
            _leadingParents = _path.substring(1).match(/^(\.\.\/)+/) || '';
            if (_leadingParents) {
                _leadingParents = _leadingParents[0];
            }
        }
        while (true) {
            _parent = _path.indexOf('/..');
            if (_parent === -1) {
                break;
            } else if (_parent === 0) {
                _path = _path.substring(3);
                continue;
            }
            _pos = _path.substring(0, _parent).lastIndexOf('/');
            if (_pos === -1) {
                _pos = _parent;
            }
            _path = _path.substring(0, _pos) + _path.substring(_parent + 3);
        }
        if (_was_relative && this.is('relative')) {
            _path = _leadingParents + _path.substring(1);
        }
        _path = URI.recodePath(_path);
        this._parts.path = _path;
        this.build(!build);
        return this;
    };
    p.normalizePathname = p.normalizePath;
    p.normalizeQuery = function (build) {
        if (typeof this._parts.query === 'string') {
            if (!this._parts.query.length) {
                this._parts.query = null;
            } else {
                this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace));
            }
            this.build(!build);
        }
        return this;
    };
    p.normalizeFragment = function (build) {
        if (!this._parts.fragment) {
            this._parts.fragment = null;
            this.build(!build);
        }
        return this;
    };
    p.normalizeSearch = p.normalizeQuery;
    p.normalizeHash = p.normalizeFragment;
    p.iso8859 = function () {
        var e = URI.encode;
        var d = URI.decode;
        URI.encode = escape;
        URI.decode = decodeURIComponent;
        this.normalize();
        URI.encode = e;
        URI.decode = d;
        return this;
    };
    p.unicode = function () {
        var e = URI.encode;
        var d = URI.decode;
        URI.encode = strictEncodeURIComponent;
        URI.decode = unescape;
        this.normalize();
        URI.encode = e;
        URI.decode = d;
        return this;
    };
    p.readable = function () {
        var uri = this.clone();
        uri.username('').password('').normalize();
        var t = '';
        if (uri._parts.protocol) {
            t += uri._parts.protocol + '://';
        }
        if (uri._parts.hostname) {
            if (uri.is('punycode') && punycode) {
                t += punycode.toUnicode(uri._parts.hostname);
                if (uri._parts.port) {
                    t += ':' + uri._parts.port;
                }
            } else {
                t += uri.host();
            }
        }
        if (uri._parts.hostname && uri._parts.path && uri._parts.path.charAt(0) !== '/') {
            t += '/';
        }
        t += uri.path(true);
        if (uri._parts.query) {
            var q = '';
            for (var i = 0, qp = uri._parts.query.split('&'), l = qp.length; i < l; i++) {
                var kv = (qp[i] || '').split('=');
                q += '&' + URI.decodeQuery(kv[0], this._parts.escapeQuerySpace).replace(/&/g, '%26');
                if (kv[1] !== undefined) {
                    q += '=' + URI.decodeQuery(kv[1], this._parts.escapeQuerySpace).replace(/&/g, '%26');
                }
            }
            t += '?' + q.substring(1);
        }
        t += URI.decodeQuery(uri.hash(), true);
        return t;
    };
    p.absoluteTo = function (base) {
        var resolved = this.clone();
        var properties = [
            'protocol',
            'username',
            'password',
            'hostname',
            'port'
        ];
        var basedir, i, p;
        if (this._parts.urn) {
            throw new Error('URNs do not have any generally defined hierarchical components');
        }
        if (!(base instanceof URI)) {
            base = new URI(base);
        }
        if (!resolved._parts.protocol) {
            resolved._parts.protocol = base._parts.protocol;
        }
        if (this._parts.hostname) {
            return resolved;
        }
        for (i = 0; p = properties[i]; i++) {
            resolved._parts[p] = base._parts[p];
        }
        if (!resolved._parts.path) {
            resolved._parts.path = base._parts.path;
            if (!resolved._parts.query) {
                resolved._parts.query = base._parts.query;
            }
        } else if (resolved._parts.path.substring(-2) === '..') {
            resolved._parts.path += '/';
        }
        if (resolved.path().charAt(0) !== '/') {
            basedir = base.directory();
            resolved._parts.path = (basedir ? basedir + '/' : '') + resolved._parts.path;
            resolved.normalizePath();
        }
        resolved.build();
        return resolved;
    };
    p.relativeTo = function (base) {
        var relative = this.clone().normalize();
        var relativeParts, baseParts, common, relativePath, basePath;
        if (relative._parts.urn) {
            throw new Error('URNs do not have any generally defined hierarchical components');
        }
        base = new URI(base).normalize();
        relativeParts = relative._parts;
        baseParts = base._parts;
        relativePath = relative.path();
        basePath = base.path();
        if (relativePath.charAt(0) !== '/') {
            throw new Error('URI is already relative');
        }
        if (basePath.charAt(0) !== '/') {
            throw new Error('Cannot calculate a URI relative to another relative URI');
        }
        if (relativeParts.protocol === baseParts.protocol) {
            relativeParts.protocol = null;
        }
        if (relativeParts.username !== baseParts.username || relativeParts.password !== baseParts.password) {
            return relative.build();
        }
        if (relativeParts.protocol !== null || relativeParts.username !== null || relativeParts.password !== null) {
            return relative.build();
        }
        if (relativeParts.hostname === baseParts.hostname && relativeParts.port === baseParts.port) {
            relativeParts.hostname = null;
            relativeParts.port = null;
        } else {
            return relative.build();
        }
        if (relativePath === basePath) {
            relativeParts.path = '';
            return relative.build();
        }
        common = URI.commonPath(relative.path(), base.path());
        if (!common) {
            return relative.build();
        }
        var parents = baseParts.path.substring(common.length).replace(/[^\/]*$/, '').replace(/.*?\//g, '../');
        relativeParts.path = parents + relativeParts.path.substring(common.length);
        return relative.build();
    };
    p.equals = function (uri) {
        var one = this.clone();
        var two = new URI(uri);
        var one_map = {};
        var two_map = {};
        var checked = {};
        var one_query, two_query, key;
        one.normalize();
        two.normalize();
        if (one.toString() === two.toString()) {
            return true;
        }
        one_query = one.query();
        two_query = two.query();
        one.query('');
        two.query('');
        if (one.toString() !== two.toString()) {
            return false;
        }
        if (one_query.length !== two_query.length) {
            return false;
        }
        one_map = URI.parseQuery(one_query, this._parts.escapeQuerySpace);
        two_map = URI.parseQuery(two_query, this._parts.escapeQuerySpace);
        for (key in one_map) {
            if (hasOwn.call(one_map, key)) {
                if (!isArray(one_map[key])) {
                    if (one_map[key] !== two_map[key]) {
                        return false;
                    }
                } else if (!arraysEqual(one_map[key], two_map[key])) {
                    return false;
                }
                checked[key] = true;
            }
        }
        for (key in two_map) {
            if (hasOwn.call(two_map, key)) {
                if (!checked[key]) {
                    return false;
                }
            }
        }
        return true;
    };
    p.duplicateQueryParameters = function (v) {
        this._parts.duplicateQueryParameters = !!v;
        return this;
    };
    p.escapeQuerySpace = function (v) {
        this._parts.escapeQuerySpace = !!v;
        return this;
    };
    return URI;
});

define('urijs', ['urijs/URI'], function (main) { return main; });

define('help/formTrack', [
    'exports',
    'module',
    'jquery',
    'babel-runtime/helpers/interop-require-default',
    'crypto',
    'isMobile',
    'urijs'
], function (exports, module, _jquery, _babelRuntimeHelpersInteropRequireDefault, _crypto, _isMobile, _urijs) {
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _crypto2 = _babelRuntimeHelpersInteropRequireDefault['default'](_crypto);
    var _isMobile2 = _babelRuntimeHelpersInteropRequireDefault['default'](_isMobile);
    var _uri = _babelRuntimeHelpersInteropRequireDefault['default'](_urijs);
    var fromTrack = function fromTrack() {
        var formTrack = _$['default']('[track-form]');
        var trackString = '';
        var timer = undefined;
        var search = location.search;
        var from = search ? _uri['default'].parseQuery(location.search).uifrom : '';
        var uifrom = from ? '&uifrom=' + from : '';
        var platform = _isMobile2['default'].any ? '&platform=mobile' : '&platform=pc';
        var requestid = _uri['default'].parseQuery(location.search).requestid;
        var pathname = undefined;
        var path = undefined;
        window.formTrackIndex = 0;
        var trackMsg = function trackMsg() {
            pathname = location.pathname + location.hash + location.search + 'formTrack';
            var md5 = _crypto2['default'].createHash('md5');
            md5.update(pathname);
            path = md5.digest('hex');
        };
        var addBh = function addBh(ET, ES, AREA, UID) {
            var tt = new Date().getTime();
            trackString += 'tt:' + tt + '|et:' + ET + '|es:' + ES + '|area:' + AREA + '|uid:' + UID + '|VideoPos:|videoOffset:|videoDura:|playTime:;';
            if (encodeURIComponent(trackString.length) > 500) {
                sendBh();
                clearInterval(timer);
                startInterval(30);
            }
        };
        var sendBh = function sendBh() {
            new Image().src = '/img/bh.gif?bh=' + encodeURIComponent(trackString) + uifrom + platform;
            trackString = '';
        };
        var bind = function bind(obj) {
            obj.map(function () {
                var me = _$['default'](this);
                if (typeof me.attr('uid') == 'undefined') {
                    var uid = path + '-' + window.formTrackIndex;
                    me.attr('uid', uid);
                    window.formTrackIndex++;
                }
                me.on('click', function (e) {
                    addBh('click', me.attr('track-form'), '', me.attr('uid'));
                });
            });
        };
        var startInterval = function startInterval(interval) {
            timer = setInterval(function () {
                if (trackString.length > 0) {
                    sendBh();
                }
            }, 1000 * interval);
        };
        if (formTrack.length !== 0) {
            trackMsg();
            bind(formTrack);
            window.onbeforeunload = function () {
                if (trackString.length > 0) {
                    sendBh();
                }
            };
            window.onload = function () {
                sendBh();
            };
            startInterval(30);
        }
    };
    module.exports = fromTrack;
});

(function (factory) {
    if (typeof define === 'function' && define.amd) {
        define('jquery.cookie/jquery.cookie', ['jquery'], factory);
    } else {
        factory(jQuery);
    }
}(function ($) {
    var pluses = /\+/g;
    function encode(s) {
        return config.raw ? s : encodeURIComponent(s);
    }
    function decode(s) {
        return config.raw ? s : decodeURIComponent(s);
    }
    function stringifyCookieValue(value) {
        return encode(config.json ? JSON.stringify(value) : String(value));
    }
    function parseCookieValue(s) {
        if (s.indexOf('"') === 0) {
            s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
        }
        try {
            s = decodeURIComponent(s.replace(pluses, ' '));
        } catch (e) {
            return;
        }
        try {
            return config.json ? JSON.parse(s) : s;
        } catch (e) {
        }
    }
    function read(s, converter) {
        var value = config.raw ? s : parseCookieValue(s);
        return $.isFunction(converter) ? converter(value) : value;
    }
    var config = $.cookie = function (key, value, options) {
        if (value !== undefined && !$.isFunction(value)) {
            options = $.extend({}, config.defaults, options);
            if (typeof options.expires === 'number') {
                var days = options.expires, t = options.expires = new Date();
                t.setDate(t.getDate() + days);
            }
            return document.cookie = [
                encode(key),
                '=',
                stringifyCookieValue(value),
                options.expires ? '; expires=' + options.expires.toUTCString() : '',
                options.path ? '; path=' + options.path : '',
                options.domain ? '; domain=' + options.domain : '',
                options.secure ? '; secure' : ''
            ].join('');
        }
        var result = key ? undefined : {};
        var cookies = document.cookie ? document.cookie.split('; ') : [];
        for (var i = 0, l = cookies.length; i < l; i++) {
            var parts = cookies[i].split('=');
            var name = decode(parts.shift());
            var cookie = parts.join('=');
            if (key && key === name) {
                result = read(cookie, value);
                break;
            }
            if (!key && (cookie = read(cookie)) !== undefined) {
                result[name] = cookie;
            }
        }
        return result;
    };
    config.defaults = {};
    $.removeCookie = function (key, options) {
        if ($.cookie(key) !== undefined) {
            $.cookie(key, '', $.extend({}, options, { expires: -1 }));
            return true;
        }
        return false;
    };
}));

define('jquery.cookie', ['jquery.cookie/jquery.cookie'], function (main) { return main; });

define('flags', ['exports'], function (exports) {
    exports.__esModule = true;
    var DOMAINS = [
        'cloud.baidu.com',
        'cloudtest.baidu.com',
        'intl.cloud.baidu.com',
        'intl.cloudtest.baidu-int.com'
    ];
    var enable_account_v2 = DOMAINS.indexOf(location.host) > -1;
    exports.enable_account_v2 = enable_account_v2;
});

define('help/portalPathTrack', [
    'exports',
    'jquery',
    'babel-runtime/helpers/interop-require-default',
    'jquery.cookie',
    '../flags'
], function (exports, _jquery, _babelRuntimeHelpersInteropRequireDefault, _jqueryCookie, _flags) {
    exports.__esModule = true;
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _FLAGS = _babelRuntimeHelpersInteropRequireDefault['default'](_flags);
    var defaultOptions = { timeout: 3000 };
    var host = location.host === 'cloud.baidu.com' ? {
        bce: 'bce.baidu.com',
        cloud: 'cloud.baidu.com'
    } : {
        bce: 'bcetest.baidu.com',
        cloud: 'cloudtest.baidu.com'
    };
    var cookieKey = 'BAIDU_CLOUD_TRACK_PATH';
    var init = function init() {
        var value = location.href;
        _$['default'].cookie(cookieKey, value, {
            expires: 90,
            path: '/',
            domain: '.' + host.cloud
        });
        var iframeUrl = '//' + host.bce + '/helper/x.html?portalpathtrack=' + value + '&.stamp=' + new Date().getTime();
        var iframe = _$['default']('<iframe/>').attr('src', iframeUrl).hide();
        _$['default'](document.body).append(iframe);
        iframe.on('load', function () {
            iframe.remove();
        });
    };
    exports.init = init;
});

define('common', [
    'require',
    'jquery',
    'underscore',
    './notice/list',
    './common/contactUs',
    './help/formTrack',
    './help/portalPathTrack'
], function (require) {
    var $ = require('jquery');
    var u = require('underscore');
    var notice = require('./notice/list');
    var contactUs = require('./common/contactUs');
    var formTrack = require('./help/formTrack');
    var portalPathTrack = require('./help/portalPathTrack');
    var exports = {};
    exports.init = function () {
        contactUs.init();
        portalPathTrack.init();
        $(window).on('scroll', function () {
            var winToTop = $(window).scrollTop();
            if (winToTop >= 300) {
                $('.scroll-top').show();
            } else {
                $('.scroll-top').hide();
            }
        });
        $(document).ready(function () {
            notice.init();
        });
        $('#header-search-button').click(function () {
            var query = $('#header-search-input').val();
            if ($.trim(query) !== '') {
                $('#header-search-form').submit();
            }
        });
        $('.tab-navigator > ul').on('mouseenter', 'a', function (e) {
            var $link = $(this);
            var $tabNavigator = $link.closest('.tab-navigator');
            $tabNavigator.find('>ul >li').removeClass('selected');
            $tabNavigator.find('>div').removeClass('selected');
            var target = $link.closest('li').addClass('selected').data('target');
            $tabNavigator.children('div').each(function () {
                $(this).toggleClass('selected', $(this).hasClass(target));
            });
        });
        $('.pre-sale .msg-item').on('mouseenter', function (e) {
            var target = $(this);
            target.find('.qrCode').show();
            target.parents('.pre-sale').addClass('mouse-on');
        }).on('mouseout', function () {
            var target = $(this);
            target.find('.qrCode').hide();
            target.parents('.pre-sale').removeClass('mouse-on');
        });
        formTrack();
    };
    return exports;
});